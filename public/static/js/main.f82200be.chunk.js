(this["webpackJsonpreact-admin-client"]=this["webpackJsonpreact-admin-client"]||[]).push([[0],{319:function(e,t,n){},398:function(e,t,n){},399:function(e,t,n){},400:function(e,t,n){},401:function(e,t,n){},405:function(e,t,n){},417:function(e,t,n){},520:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(38),c=n.n(r),s=n(49),i=n(27),o=n(24),l=n.n(o),u=n(33),j=n(291),d=n(532),b=n(287),m=n(137),O=n(42),h=n(159),x=n(204),p=n.n(x);function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(a,r){("GET"===n?p.a.get(e,{params:t}):p.a.post(e,t)).then((function(e){a(e.data)})).catch((function(e){j.b.error("\u8bf7\u6c42\u51fa\u9519\u4e86\uff1a"+e.message)}))}))}var g=function(e,t){return f("/login",{username:e,password:t},"POST")},v=function(e){return f("/manage/category/list",{parentId:e})},y=function(e,t){return f("/manage/category/add",{categoryName:e,parentId:t},"POST")},w=function(e){return f("/manage/category/info",{categoryId:e})},k=function(e,t){return f("/manage/product/list",{pageNum:e,pageSize:t})},S=function(e,t){return f("/manage/product/updateStatus",{productId:e,status:t},"POST")},I=function(e){var t=e.pageNum,n=e.pageSize,a=e.searchName,r=e.searchType;return f("/manage/product/search",Object(h.a)({pageNum:t,pageSize:n},r,a))},C=function(e){return f("/manage/img/delete",{name:e},"POST")},N=function(e){return f("/manage/product/"+(e._id?"update":"add"),e,"POST")},A=function(e){return f("/manage/role/add",{roleName:e},"POST")},_=function(e){return f("/manage/role/update",e,"POST")},R=function(e){return f("/manage/user/"+(e._id?"update":"add"),e,"POST")},F=n(538),P=n(539),T=(n(319),n.p+"static/media/logo.83e0c628.jpg"),E={user:{}},L=n(188),M=n.n(L),z="user_key",D={saveUser:function(e){M.a.set(z,e)},getUser:function(){return M.a.get(z)||{}},removeUser:function(){M.a.remove(z)}},B=n(4);function V(){var e=Object(i.h)(),t=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.username,r=n.password,t.next=3,g(a,r);case 3:0===(c=t.sent).status?(j.b.success("\u767b\u9646\u6210\u529f"),s=c.data,E.user=s,D.saveUser(s),e("/",{replace:!0})):j.b.error(c.msg);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=E.user;return n&&n._id?Object(B.jsx)(i.a,{to:"/"}):Object(B.jsxs)("div",{className:"login",children:[Object(B.jsxs)("header",{className:"login-header",children:[Object(B.jsx)("img",{src:T,alt:"logo"}),Object(B.jsx)("h1",{children:"React\u9879\u76ee\uff1a\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf"})]}),Object(B.jsxs)("section",{className:"login-content",children:[Object(B.jsx)("h2",{children:"\u7528\u6237\u767b\u5f55"}),Object(B.jsxs)(d.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:t,onFinishFailed:function(e){console.log("\u6821\u9a8c\u5931\u8d25",e)},children:[Object(B.jsx)(d.a.Item,{name:"username",rules:[{required:!0,whitespace:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u7528\u6237\u540d!"},{max:12,message:"\u7528\u6237\u540d\u6700\u591a\u5341\u4e8c\u4f4d"},{min:3,message:"\u7528\u6237\u540d\u81f3\u5c11\u4e09\u4f4d"},{pattern:/^[a-zA-Z0-9_]+$/,message:"\u7528\u6237\u540d\u5fc5\u987b\u662f\u82f1\u6587,\u6570\u5b57\u548c\u4e0b\u5212\u7ebf\u7ec4\u6210"}],children:Object(B.jsx)(b.a,{prefix:Object(B.jsx)(F.a,{className:"site-form-item-icon"}),placeholder:"Username"})}),Object(B.jsx)(d.a.Item,{name:"password",rules:[{validator:function(e,t){return t?t.length<3||t.length>12?Promise.reject(new Error("\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e4\u4f4d\u6216\u5927\u4e8e12\u4f4d")):/^[a-zA-Z0-9_]+$/.test(t)?Promise.resolve():Promise.reject(new Error("\u5bc6\u7801\u5fc5\u987b\u662f\u82f1\u6587\uff0c\u6570\u5b57\u548c\u4e0b\u5212\u7ebf\u7ec4\u6210")):Promise.reject(new Error("\u5bc6\u7801\u5fc5\u987b\u8f93\u5165"))}}],children:Object(B.jsx)(b.a,{prefix:Object(B.jsx)(P.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})}),Object(B.jsxs)(d.a.Item,{children:[Object(B.jsx)(d.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:Object(B.jsx)(m.a,{children:"\u8bb0\u4f4f\u5bc6\u7801"})}),Object(B.jsx)("a",{className:"login-form-forgot",href:"https://www.baidu.com",children:"\u5fd8\u8bb0\u5bc6\u7801"})]}),Object(B.jsxs)(d.a.Item,{children:[Object(B.jsx)(O.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"\u767b\u5f55"}),"\u6216 ",Object(B.jsx)("a",{href:"https://www.baidu.com",children:"\u7acb\u523b\u6ce8\u518c!"})]})]})]})]})}var q=n(526),J=n(15),H=n(534),U=n(138);n(398);function K(e){if(!e)return"";var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}var G=n(540),W=n(541),Y=n(295),Q=n(542),X=n(543),Z=n(544),$=n(545),ee=n(546),te=n(547),ne=[{title:"\u9996\u9875",key:"/",icon:Object(B.jsx)(G.a,{})},{title:"\u5546\u54c1",key:"/products",icon:Object(B.jsx)(W.a,{}),children:[{title:"\u54c1\u7c7b\u7ba1\u7406",key:"/category",icon:Object(B.jsx)(Y.a,{})},{title:"\u5546\u54c1\u7ba1\u7406",key:"/product",icon:Object(B.jsx)(Q.a,{})}]},{title:"\u7528\u6237\u7ba1\u7406",key:"/user",icon:Object(B.jsx)(F.a,{})},{title:"\u89d2\u8272\u7ba1\u7406",key:"/role",icon:Object(B.jsx)(X.a,{})},{title:"\u56fe\u5f62\u56fe\u8868",key:"/charts",icon:Object(B.jsx)(Z.a,{}),children:[{title:"\u67f1\u5f62\u56fe",key:"/charts-bar",icon:Object(B.jsx)($.a,{})},{title:"\u6298\u7ebf\u56fe",key:"/charts-line",icon:Object(B.jsx)(ee.a,{})},{title:"\u997c\u56fe",key:"/charts-pie",icon:Object(B.jsx)(te.a,{})}]}],ae=n(207);n(399);function re(e){return Object(B.jsx)("button",Object(ae.a)(Object(ae.a)({},e),{},{className:"link-button"}))}var ce=H.a.confirm;function se(){var e=E.user.username,t=Object(a.useState)(K(Date.now())),n=Object(J.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),o=Object(J.a)(s,2),d=o[0],b=o[1],m=Object(a.useState)(""),O=Object(J.a)(m,2),h=O[0],x=O[1],p=Object(i.g)().pathname,g=Object(i.h)(),v="",y=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("https://devapi.qweather.com/v7/weather/now",{key:"d6d54c0f8bb54160b97507ce068abda8",location:"101010100"});case 2:"200"===(t=e.sent).code?(n=t.now,a=n.icon,r=n.text,b(a),154===parseInt(a)&&b(104),x(r)):j.b.error("\u83b7\u53d6\u5929\u6c14\u4fe1\u606f\u5931\u8d25");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){y();var e=setInterval((function(){c(K(Date.now()))}),1e3);return function(){clearInterval(e)}}),[]);!function e(t){return t.map((function(t){return t.children?e(t.children):t.key===p&&(v=t.title),v}))}(ne);return Object(B.jsxs)("div",{className:"header",children:[Object(B.jsxs)("div",{className:"header-top",children:[Object(B.jsxs)("span",{children:["\u6b22\u8fce\uff0c",e]}),Object(B.jsx)(re,{onClick:function(){ce({title:"\u786e\u5b9a\u9000\u51fa\u5417?",icon:Object(B.jsx)(U.a,{}),onOk:function(){D.removeUser(),E.user={},g("/login",{replace:!0})},onCancel:function(){console.log("Cancel")}})},children:"\u9000\u51fa"})]}),Object(B.jsxs)("div",{className:"header-bottom",children:[Object(B.jsx)("div",{className:"header-bottom-left",children:v}),Object(B.jsxs)("div",{className:"header-bottom-right",children:[Object(B.jsx)("span",{children:r}),Object(B.jsx)("i",{className:"qi-"+d+"-fill",style:{color:"black",fontSize:"17px",margin:"0 15px"}}),Object(B.jsx)("span",{children:h})]})]})]})}var ie=n(106),oe=(n(400),ie.a.SubMenu);function le(){var e=Object(i.g)().pathname;e="/"+e.split(/\//)[1];var t="",n=function n(a){return a.map((function(a){return r(a)?a.children?(a.children.find((function(t){return 0===e.indexOf(t.key)}))&&(t=a.key),Object(B.jsx)(oe,{icon:a.icon,title:a.title,children:n(a.children)},a.key)):Object(B.jsx)(ie.a.Item,{icon:a.icon,children:Object(B.jsx)(s.b,{to:a.key,children:a.title})},a.key):null}))},r=function(e){var t=e.key,n=e.isPublic,a=E.user.role.menus;return!("admin"!==E.user.username&&!n&&-1===a.indexOf(t))||!!e.children&&!!e.children.find((function(e){return-1!==a.indexOf(e.key)}))};return Object(a.useMemo)((function(){n(ne)}),[]),Object(B.jsxs)("div",{className:"left-nav",children:[Object(B.jsxs)(s.b,{to:"/",className:"left-nav-header",children:[Object(B.jsx)("img",{src:T,alt:"logo"}),Object(B.jsx)("h1",{children:"\u5546\u57ce\u540e\u53f0"})]}),Object(B.jsx)(ie.a,{selectedKeys:[e],defaultOpenKeys:[t],mode:"inline",theme:"dark",children:n(ne)})]})}var ue=q.a.Footer,je=q.a.Sider,de=q.a.Content;function be(){var e=E.user;return e&&e._id?Object(B.jsxs)(q.a,{style:{minHeight:"100%"},children:[Object(B.jsx)(je,{children:Object(B.jsx)(le,{})}),Object(B.jsxs)(q.a,{children:[Object(B.jsx)(se,{}),Object(B.jsx)(de,{style:{margin:20,backgroundColor:"#fff"},children:Object(B.jsx)(i.b,{})}),Object(B.jsx)(ue,{style:{textAlign:"center",color:"#cccccc"},children:"\u63a8\u8350\u4f7f\u7528\u8c37\u6b4c\u6d4f\u89c8\u5668\uff0c\u53ef\u4ee5\u83b7\u5f97\u66f4\u4f73\u9875\u9762\u64cd\u4f5c\u4f53\u9a8c"})]})]}):Object(B.jsx)(i.a,{to:"/login"})}var me=n(123),Oe=n(69);n(401);function he(){var e=Object(i.h)();return Object(B.jsxs)(me.a,{className:"not-found",children:[Object(B.jsx)(Oe.a,{span:12,className:"left"}),Object(B.jsxs)(Oe.a,{span:12,className:"right",children:[Object(B.jsx)("h1",{children:"404"}),Object(B.jsx)("h2",{children:"\u62b1\u6b49\uff0c\u4f60\u8bbf\u95ee\u7684\u9875\u9762\u4e0d\u5b58\u5728"}),Object(B.jsx)("div",{children:Object(B.jsx)(O.a,{type:"primary",onClick:function(){return e("/",{replace:!0})},children:"\u56de\u5230\u9996\u9875"})})]})]})}var xe=n(529),pe=n(527),fe=n(136),ge=d.a.Item,ve=fe.a.Option;function ye(e){var t=e.roles,n=e.user,r=e.setForm,c=n.username,s=n._id,i=n.password,o=n.phone,l=n.email,u=n.role_id;console.log(n);var j=d.a.useForm(),m=Object(J.a)(j,1)[0];return Object(a.useEffect)((function(){m.setFieldsValue({username:c,password:i,phone:o,email:l,role_id:u}),r(m)}),[n]),Object(B.jsxs)(d.a,{form:m,labelCol:{span:4},wrapperCol:{span:15},children:[Object(B.jsx)(ge,{label:"\u7528\u6237\u540d",name:"username",children:Object(B.jsx)(b.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})}),s?null:Object(B.jsx)(ge,{label:"\u5bc6\u7801",name:"password",children:Object(B.jsx)(b.a,{type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})}),Object(B.jsx)(ge,{label:"\u624b\u673a\u53f7",name:"phone",children:Object(B.jsx)(b.a,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"})}),Object(B.jsx)(ge,{label:"\u90ae\u7bb1",name:"email",children:Object(B.jsx)(b.a,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"})}),Object(B.jsx)(ge,{label:"\u89d2\u8272",name:"role_id",children:Object(B.jsx)(fe.a,{children:t.map((function(e){return Object(B.jsx)(ve,{value:e._id,children:e.name},e._id)}))})})]})}var we="http://localhost:5000/upload/";function ke(){var e=Object(a.useState)([]),t=Object(J.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)({}),s=Object(J.a)(c,2),i=s[0],o=s[1],d=Object(a.useState)([]),b=Object(J.a)(d,2),m=b[0],h=b[1],x=Object(a.useState)([]),p=Object(J.a)(x,2),g=p[0],v=p[1],y=Object(a.useState)(!1),w=Object(J.a)(y,2),k=w[0],S=w[1],I=Object(a.useState)({}),C=Object(J.a)(I,2),N=C[0],A=C[1],_=Object(B.jsx)(O.a,{type:"primary",onClick:function(){return P()},children:"\u521b\u5efa\u7528\u6237"}),F=[{title:"\u7528\u6237\u540d",dataIndex:"username"},{title:"\u90ae\u7bb1",dataIndex:"email"},{title:"\u7535\u8bdd",dataIndex:"phone"},{title:"\u6ce8\u518c\u65f6\u95f4",dataIndex:"create_time",render:K},{title:"\u6240\u5c5e\u89d2\u8272",dataIndex:"role_id",render:function(e){return g[e]}},{title:"\u64cd\u4f5c",render:function(e){return Object(B.jsxs)("span",{children:[Object(B.jsx)(re,{onClick:function(){return T(e)},children:"\u4fee\u6539"}),Object(B.jsx)(re,{onClick:function(){return E(e)},children:"\u5220\u9664"})]})}}],P=function(){o({}),S(!0)},T=function(e){o(e),S(!0)},E=function(e){H.a.confirm({title:"\u786e\u8ba4\u5220\u9664".concat(e.username,"\u5417?"),onOk:function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f("/manage/user/delete",{userId:e._id},"POST");case 2:0===t.sent.status&&(j.b.success("\u5220\u9664\u7528\u6237\u6210\u529f!"),z());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})},L=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!1),t=N.getFieldsValue(),N.resetFields(),t&&(t._id=i._id),e.next=6,R(t);case 6:0===e.sent.status&&(j.b.success("".concat(t?"\u4fee\u6539":"\u6dfb\u52a0","\u7528\u6237\u6210\u529f")),z());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(e){var t=e.reduce((function(e,t){return e[t._id]=t.name,e}),{});v(t)},z=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("/manage/user/list");case 2:0===(t=e.sent).status&&(n=t.data,a=n.users,c=n.roles,M(c),r(a),h(c));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){z()}),[]),Object(B.jsxs)(xe.a,{title:_,children:[Object(B.jsx)(pe.a,{bordered:!0,rowKey:"_id",dataSource:n,columns:F,pagination:{defaultPageSize:4}}),Object(B.jsx)(H.a,{title:i._id?"\u4fee\u6539\u7528\u6237":"\u6dfb\u52a0\u7528\u6237",visible:k,onOk:L,onCancel:function(){N.resetFields(),S(!1)},children:Object(B.jsx)(ye,{setForm:function(e){return A(e)},roles:m,user:i})})]})}var Se=n(296),Ie=n(548),Ce=fe.a.Option;function Ne(e){var t=e.categories,n=e.parentId,r=e.setForm,c=d.a.useForm(),s=Object(J.a)(c,1)[0];return Object(a.useEffect)((function(){s.setFieldsValue({categoryParentId:n}),r(s)}),[n]),Object(B.jsxs)(d.a,{form:s,children:[Object(B.jsx)(d.a.Item,{name:"categoryParentId",children:Object(B.jsxs)(fe.a,{children:[Object(B.jsx)(Ce,{value:"0",children:"\u4e00\u7ea7\u5206\u7c7b"}),t.map((function(e){return Object(B.jsx)(Ce,{value:e._id,children:e.name},e._id)}))]})}),Object(B.jsx)(d.a.Item,{name:"categoryName",rules:[{required:!0,message:"\u5206\u7c7b\u540d\u79f0\u5fc5\u987b\u8f93\u5165"}],children:Object(B.jsx)(b.a,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"})})]})}function Ae(e){var t=e.categoryData.name,n=e.setForm,r=d.a.useForm(),c=Object(J.a)(r,1)[0];return Object(a.useEffect)((function(){c.setFieldsValue({categoryName:t}),n(c)}),[t]),console.log(n),console.log(typeof t),Object(B.jsx)(d.a,{form:c,children:Object(B.jsx)(d.a.Item,{name:"categoryName",rules:[{required:!0,message:"\u5206\u7c7b\u540d\u79f0\u5fc5\u987b\u8f93\u5165"}],children:Object(B.jsx)(b.a,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"})})})}function _e(){var e=Object(a.useState)([]),t=Object(J.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),s=Object(J.a)(c,2),i=s[0],o=s[1],d=Object(a.useState)(!1),b=Object(J.a)(d,2),m=b[0],h=b[1],x=Object(a.useState)("0"),p=Object(J.a)(x,2),g=p[0],w=p[1],k=Object(a.useState)("0"),S=Object(J.a)(k,2),I=S[0],C=S[1],N=Object(a.useState)("\u4e00\u7ea7\u5206\u7c7b\u5217\u8868"),A=Object(J.a)(N,2),_=A[0],R=A[1],F=Object(a.useState)({}),P=Object(J.a)(F,2),T=P[0],E=P[1],L=Object(a.useState)({}),M=Object(J.a)(L,2),z=M[0],D=M[1],V=function(){C(0)},q=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(0),t=z.getFieldValue(),n=t.categoryParentId,a=t.categoryName,e.next=4,y(a,n);case 4:0===e.sent.status&&g===n&&W(g);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(0),t=T._id,n=z.getFieldValue("categoryName"),e.next=5,f("/manage/category/update",{categoryName:(a={categoryName:n,categoryId:t}).categoryName,categoryId:a.categoryId},"POST");case 5:0===e.sent.status&&W(g);case 7:case"end":return e.stop()}var a}),e)})));return function(){return e.apply(this,arguments)}}(),K=Object(B.jsxs)(O.a,{type:"primary",onClick:function(){C(1)},children:[Object(B.jsx)(Se.a,{}),"\u6dfb\u52a0"]}),G=[{title:"\u5206\u7c7b\u540d\u79f0",dataIndex:"name"},{title:"\u64cd\u4f5c",width:300,render:function(e){return Object(B.jsxs)("span",{children:[Object(B.jsx)(re,{onClick:function(){return function(e){E(e),C(2)}(e)},children:"\u4fee\u6539\u5206\u7c7b"}),"0"===g?Object(B.jsx)(re,{onClick:function(){return Q(e)},children:"\u67e5\u770b\u5b50\u5206\u7c7b"}):null]})}}],W=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,v(t);case 3:n=e.sent,h(!1),0===n.status?"0"===t?r(n.data):o(n.data):j.b.error("\u83b7\u53d6\u5206\u7c7b\u5217\u8868\u5931\u8d25");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){w("0"),o([]),R("\u4e00\u7ea7\u5206\u7c7b\u5217\u8868")},Q=function(e){w(e._id),R(Object(B.jsxs)("span",{children:[console.log(e.name),Object(B.jsx)(re,{onClick:Y,children:"\u4e00\u7ea7\u5206\u7c7b\u5217\u8868"}),Object(B.jsx)(Ie.a,{style:{marginRight:5}}),Object(B.jsx)("span",{children:e.name})]}))};return Object(a.useEffect)((function(){W(g)}),[g]),Object(B.jsxs)(xe.a,{title:_,extra:K,children:[Object(B.jsx)(pe.a,{rowKey:"_id",bordered:!0,pagination:{defaultPageSize:5,showQuickJumper:!0},loading:m,dataSource:"0"===g?n:i,columns:G}),Object(B.jsx)(H.a,{title:"\u6dfb\u52a0\u5206\u7c7b",visible:1===I,onOk:q,onCancel:V,children:Object(B.jsx)(Ne,{categories:n,parentId:g,setForm:function(e){return D(e)}})}),Object(B.jsx)(H.a,{title:"\u66f4\u65b0\u5206\u7c7b",visible:2===I,onOk:U,onCancel:V,children:Object(B.jsx)(Ae,{categoryData:T,setForm:function(e){return D(e)}})})]})}var Re=n(528),Fe=n(533),Pe=n(536),Te=n(294),Ee=n(549),Le=n(550),Me=n(551),ze=n(68),De=n.n(ze),Be=n(34),Ve=Object(Be.getTheme)();function qe(){var e,t=[{name:"London",month:"Jan.",monthAverageRain:18.9},{name:"London",month:"Feb.",monthAverageRain:28.8},{name:"London",month:"Mar.",monthAverageRain:39.3},{name:"London",month:"Apr.",monthAverageRain:81.4},{name:"London",month:"May",monthAverageRain:47},{name:"London",month:"Jun.",monthAverageRain:20.3},{name:"London",month:"Jul.",monthAverageRain:24},{name:"London",month:"Aug.",monthAverageRain:35.6},{name:"Berlin",month:"Jan.",monthAverageRain:12.4},{name:"Berlin",month:"Feb.",monthAverageRain:23.2},{name:"Berlin",month:"Mar.",monthAverageRain:34.5},{name:"Berlin",month:"Apr.",monthAverageRain:99.7},{name:"Berlin",month:"May",monthAverageRain:52.6},{name:"Berlin",month:"Jun.",monthAverageRain:35.5},{name:"Berlin",month:"Jul.",monthAverageRain:37.4},{name:"Berlin",month:"Aug.",monthAverageRain:42.4}],n=t.reduce((function(e,t){var n=t.month,a=t.monthAverageRain;return e[n]||(e[n]=0),e[n]+=a,e}),{}),a=Object.keys(n).map((function(e){return{month:e,averageRain:Number((n[e]/2).toFixed(2)),name:"avg"}})),r={month:{sync:!0},averageRain:{min:0,max:100,alias:"Average"},monthAverageRain:{min:0,max:100}},c=Ve.colors10,s={};return Object(B.jsx)("div",{style:{float:"right",width:750,height:300},children:Object(B.jsxs)(Be.Chart,{height:250,scale:r,data:t,autoFit:!0,onGetG2Instance:function(t){return e=t},children:[Object(B.jsx)(Be.Tooltip,{shared:!0}),Object(B.jsx)(Be.Interval,{adjust:[{type:"dodge",marginRatio:0}],color:["name",c],position:"month*monthAverageRain"}),Object(B.jsx)(Be.Axis,{name:"monthAverageRain",position:"left"}),Object(B.jsxs)(Be.View,{data:a,scale:r,padding:0,children:[Object(B.jsx)(Be.Axis,{name:"averageRain",position:"right"}),Object(B.jsx)(Be.Line,{position:"month*averageRain",color:c[2]})]}),Object(B.jsx)(Be.Legend,{custom:!0,items:[{name:"London",value:"London",marker:{symbol:"square",style:{fill:c[0]}}},{name:"Berlin",value:"Berlin",marker:{symbol:"square",style:{fill:c[1]}}},{name:"\u5e73\u5747",value:"avg",marker:{symbol:"hyphen",style:{stroke:c[2],lineWidth:2}}}],onChange:function(t){var n=t.item,a=n.value,r=!n.unchecked;if(s[a]=r,"avg"===a){var c=e.views[0];c.filter("name",(function(e){return s[e]})),c.render(!0)}else e.filter("name",(function(e){return!1!==s[e]})),e.render(!0)}})]})})}var Je=n(279),He=n.n(Je);function Ue(){for(var e=["MIDNIGHT","3 AM","6 AM","9 AM","NOON","3 PM","6 PM","9 PM"],t=[],n=0;n<24;n++){var a={};a.type=n+"",a.value=10,t.push(a)}var r=He.a.DataView,c=new r;c.source(t).transform({type:"percent",field:"value",dimension:"type",as:"percent"});var s=new r;return s.source([{type:"\u7761\u89c9",value:30},{type:"\u6668\u7ec3",value:5},{type:"\u4e0a\u73ed",value:40},{type:"\u4eb2\u5b50\u4e92\u52a8",value:5},{type:"\u8f85\u5bfc\u4f5c\u4e1a",value:5},{type:"\u7ec3\u7403&\u745c\u4f3d",value:5},{type:"\u6d17\u6fa1",value:5},{type:"\u9605\u8bfb\u5145\u7535",value:5}]).transform({type:"percent",field:"value",dimension:"type",as:"percent"}),Object(B.jsx)("div",{children:Object(B.jsxs)(Be.Chart,{placeholder:!1,height:400,padding:50,autoFit:!0,children:[Object(B.jsx)(Be.Legend,{visible:!1}),Object(B.jsxs)(Be.View,{data:c.rows,children:[Object(B.jsx)(Be.Legend,{visible:!1}),Object(B.jsx)(Be.Tooltip,{shared:!0,showTitle:!1}),Object(B.jsx)(Be.Coordinate,{type:"theta",innerRadius:.9}),Object(B.jsx)(Be.Interval,{position:"percent",adjust:"stack",color:["type",["rgba(255, 255, 255, 0)"]],style:{stroke:"#444",lineWidth:1},tooltip:!1}),Object(B.jsx)(Be.Annotation.Text,{position:["50%","40%"],content:"Dream",style:{lineHeight:"240px",fontSize:"30",fill:"#262626",textAlign:"center"}}),Object(B.jsx)(Be.Annotation.Text,{position:["50%","60%"],content:"24hours",style:{lineHeight:"240px",fontSize:"30",fill:"#262626",textAlign:"center"}})]}),Object(B.jsxs)(Be.View,{data:t,children:[Object(B.jsx)(Be.Axis,{visible:!1}),Object(B.jsx)(Be.Coordinate,{type:"polar",innerRadius:.9}),Object(B.jsx)(Be.Interval,{position:"type*value",color:"#444",label:["type",function(t){return{content:t%3===0?e[t/3]:""}},{offset:15,style:{fontSize:12,fontWeight:"bold",fill:"#bfbfbf"}}],tooltip:!1,size:["type",function(e){return e%3===0?4:1}]})]}),Object(B.jsxs)(Be.View,{data:s.rows,scale:{percent:{formatter:function(e){return(100*e).toFixed(2)+"%"}}},children:[Object(B.jsx)(Be.Coordinate,{type:"theta",innerRadius:.75}),Object(B.jsx)(Be.Interval,{position:"percent",adjust:"stack",color:"type",label:["type",{offset:40}]})]})]})})}n(405);var Ke="YYYY/MM/DD",Ge=Re.a.RangePicker;function We(){var e=Object(a.useState)(!0),t=Object(J.a)(e,2),n=t[0],r=t[1],c=function(e){return function(){return r(e)}};return Object(B.jsxs)("div",{className:"home",children:[Object(B.jsxs)(xe.a,{className:"home-card",title:"\u5546\u54c1\u603b\u91cf",extra:Object(B.jsx)(Te.a,{style:{color:"rgba(0,0,0,.45)"}}),style:{width:250},headStyle:{color:"rgba(0,0,0,.45)"},children:[Object(B.jsx)(Fe.a,{value:1128163,suffix:"\u4e2a",style:{fontWeight:"bolder"}}),Object(B.jsx)(Fe.a,{value:15,valueStyle:{fontSize:15},prefix:"\u5468\u540c\u6bd4",suffix:Object(B.jsxs)("div",{children:["%",Object(B.jsx)(Ee.a,{style:{color:"red",marginLeft:10}})]})}),Object(B.jsx)(Fe.a,{value:10,valueStyle:{fontSize:15},prefix:"\u65e5\u540c\u6bd4",suffix:Object(B.jsxs)("div",{children:["%",Object(B.jsx)(Le.a,{style:{color:"#3f8600",marginLeft:10}})]})})]}),Object(B.jsx)(qe,{}),Object(B.jsxs)(xe.a,{className:"home-content",title:Object(B.jsxs)("div",{className:"home-menu",children:[Object(B.jsx)("span",{className:n?"home-menu-active home-menu-visited":"home-menu-visited",onClick:c(!0),children:"\u8bbf\u95ee\u91cf"}),Object(B.jsx)("span",{className:n?"":"home-menu-active",onClick:c(!1),children:"\u9500\u552e\u91cf"})]}),extra:Object(B.jsx)(Ge,{defaultValue:[De()("2019/01/01",Ke),De()("2019/06/01",Ke)],format:Ke}),children:[Object(B.jsx)(xe.a,{className:"home-table-left",title:n?"\u8bbf\u95ee\u8d8b\u52bf":"\u9500\u552e\u8d8b\u52bf",bodyStyle:{padding:0,height:350},extra:Object(B.jsx)(Me.a,{}),children:Object(B.jsx)(Ue,{})}),Object(B.jsx)(xe.a,{title:"\u4efb\u52a1",extra:Object(B.jsx)(Me.a,{}),className:"home-table-right",children:Object(B.jsxs)(Pe.a,{children:[Object(B.jsx)(Pe.a.Item,{color:"green",children:"\u65b0\u7248\u672c\u8fed\u4ee3\u4f1a"}),Object(B.jsx)(Pe.a.Item,{color:"green",children:"\u5b8c\u6210\u7f51\u7ad9\u8bbe\u8ba1\u521d\u7248"}),Object(B.jsxs)(Pe.a.Item,{color:"red",children:[Object(B.jsx)("p",{children:"\u8054\u8c03\u63a5\u53e3"}),Object(B.jsx)("p",{children:"\u529f\u80fd\u9a8c\u6536"})]}),Object(B.jsxs)(Pe.a.Item,{children:[Object(B.jsx)("p",{children:"\u767b\u5f55\u529f\u80fd\u8bbe\u8ba1"}),Object(B.jsx)("p",{children:"\u6743\u9650\u9a8c\u8bc1"}),Object(B.jsx)("p",{children:"\u9875\u9762\u6392\u7248"})]})]})})]})]})}n(417);function Ye(){return Object(B.jsx)("div",{children:Object(B.jsx)(i.b,{})})}function Qe(e){var t=e.setForm,n=d.a.useForm(),r=Object(J.a)(n,1)[0];return Object(a.useEffect)((function(){t(r)}),[]),Object(B.jsx)(d.a,{form:r,children:Object(B.jsx)(d.a.Item,{label:"\u89d2\u8272\u540d\u79f0",name:"roleName",rules:[{required:!0,message:"\u89d2\u8272\u540d\u79f0\u5fc5\u987b\u8f93\u5165"}],children:Object(B.jsx)(b.a,{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"})})})}var Xe=n(531),Ze=d.a.Item;function $e(e){var t=e.role,n=e.getMenus,r=t.menus,c=Object(a.useState)([]),s=Object(J.a)(c,2),i=s[0],o=s[1],l=[{title:"\u5e73\u53f0\u6743\u9650",key:"all",children:ne}];return Object(a.useEffect)((function(){o(r)}),[r]),Object(a.useEffect)((function(){n(i)}),[i]),Object(B.jsxs)(d.a,{children:[Object(B.jsx)(Ze,{label:"\u89d2\u8272\u540d\u79f0",children:Object(B.jsx)(b.a,{value:t.name,disabled:!0})}),Object(B.jsx)(Xe.a,{checkable:!0,defaultExpandAll:!0,checkedKeys:i,onCheck:function(e){o(e)},treeData:l})]})}function et(){var e=Object(i.h)(),t=Object(a.useState)([]),n=Object(J.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)({}),o=Object(J.a)(s,2),d=o[0],b=o[1],m=Object(a.useState)([]),h=Object(J.a)(m,2),x=h[0],p=h[1],g=Object(a.useState)(!1),v=Object(J.a)(g,2),y=v[0],w=v[1],k=Object(a.useState)(!1),S=Object(J.a)(k,2),I=S[0],C=S[1],N=Object(a.useState)({}),R=Object(J.a)(N,2),F=R[0],P=R[1],T=Object(a.useState)([]),L=Object(J.a)(T,2),M=L[0],z=L[1],V=Object(B.jsxs)("span",{children:[Object(B.jsx)(O.a,{type:"primary",onClick:function(){return w(!0)},children:"\u521b\u5efa\u89d2\u8272"})," \xa0\xa0",Object(B.jsx)(O.a,{type:"primary",disabled:!d._id,onClick:function(){return C(!0)},children:"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650"})]}),q=[{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",render:function(e){return K(e)}},{title:"\u6388\u6743\u65f6\u95f4",dataIndex:"auth_time",render:K},{title:"\u6388\u6743\u4eba",dataIndex:"auth_name"}],U=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("/manage/role/list");case 2:0===(t=e.sent).status&&(n=t.data,c(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!1),t=F.getFieldValue(),n=t.roleName,e.next=4,A(n);case 4:0===e.sent.status?(j.b.success("\u6dfb\u52a0\u89d2\u8272\u6210\u529f"),U()):j.b.error("\u6dfb\u52a0\u89d2\u8272\u5931\u8d25"),F.resetFields();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C(!1),d.menus=M,d.auth_time=Date.now(),d.auth_name=E.user.username,console.log(d),t.next=7,_(d);case 7:0===t.sent.status&&(d._id===E.user.role_id?(E.user={},D.removeUser(),e("/login",{replace:!0}),j.b.success("\u5f53\u524d\u7528\u6237\u89d2\u8272\u6743\u9650\u6210\u529f")):j.b.success("\u8bbe\u7f6e\u89d2\u8272\u6743\u9650\u6210\u529f"));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){U()}),[]),Object(B.jsxs)(xe.a,{title:V,children:[Object(B.jsx)(pe.a,{bordered:!0,rowKey:"_id",dataSource:r,columns:q,pagination:{defaultPageSize:4},rowSelection:{type:"radio",selectedRowKeys:x,onChange:function(e){return p(e)},onSelect:function(e){return b(e)}},onRow:function(e){return{onClick:function(t){b(e),p([e._id])}}}}),Object(B.jsx)(H.a,{title:"\u6dfb\u52a0\u89d2\u8272",visible:y,onOk:G,onCancel:function(){w(!1),F.resetFields()},children:Object(B.jsx)(Qe,{setForm:function(e){return P(e)}})}),Object(B.jsx)(H.a,{title:"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650",visible:I,onOk:W,onCancel:function(){C(!1)},children:Object(B.jsx)($e,{role:d,getMenus:function(e){return z(e)}})})]})}var tt=n(102);function nt(){var e=Object(a.useState)([5,20,36,10,10,20]),t=Object(J.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([6,10,25,20,15,10]),s=Object(J.a)(c,2),i=s[0],o=s[1];return Object(B.jsxs)("div",{children:[Object(B.jsx)(xe.a,{children:Object(B.jsx)(O.a,{type:"primary",onClick:function(){r(n.map((function(e){return e+1}))),o(i.reduce((function(e,t){return e.push(t-1),e}),[]))},children:"\u66f4\u65b0"})}),Object(B.jsx)(xe.a,{title:"\u67f1\u72b6\u56fe\u4e00",children:Object(B.jsx)(tt.a,{option:function(e,t){return{tooltip:{},legend:{data:["\u9500\u91cf","\u5e93\u5b58"]},xAxis:{data:["\u886c\u886b","\u7f8a\u6bdb\u886b","\u96ea\u7eba\u886b","\u88e4\u5b50","\u9ad8\u8ddf\u978b","\u889c\u5b50"]},yAxis:{},series:[{name:"\u9500\u91cf",type:"bar",data:e},{name:"\u5e93\u5b58",type:"bar",data:t}]}}(n,i)})})]})}function at(){var e=Object(a.useState)([5,20,36,10,10,20]),t=Object(J.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([6,10,25,20,15,10]),s=Object(J.a)(c,2),i=s[0],o=s[1];return Object(B.jsxs)("div",{children:[Object(B.jsx)(xe.a,{children:Object(B.jsx)(O.a,{type:"primary",onClick:function(){r(n.map((function(e){return e+1}))),o(i.reduce((function(e,t){return e.push(t-1),e}),[]))},children:"\u66f4\u65b0"})}),Object(B.jsx)(xe.a,{title:"\u6298\u7ebf\u56fe\u4e00",children:Object(B.jsx)(tt.a,{option:function(e,t){return{tooltip:{},legend:{data:["\u9500\u91cf","\u5e93\u5b58"]},xAxis:{data:["\u886c\u886b","\u7f8a\u6bdb\u886b","\u96ea\u7eba\u886b","\u88e4\u5b50","\u9ad8\u8ddf\u978b","\u889c\u5b50"]},yAxis:{},series:[{name:"\u9500\u91cf",type:"line",data:e},{name:"\u5e93\u5b58",type:"line",data:t}]}}(n,i)})})]})}function rt(){return Object(B.jsxs)("div",{children:[Object(B.jsx)(xe.a,{title:"\u997c\u56fe\u4e00",children:Object(B.jsx)(tt.a,{option:{title:{text:"\u67d0\u7ad9\u70b9\u7528\u6237\u8bbf\u95ee\u6765\u6e90",subtext:"\u7eaf\u5c5e\u865a\u6784",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["\u76f4\u63a5\u8bbf\u95ee","\u90ae\u4ef6\u8425\u9500","\u8054\u76df\u5e7f\u544a","\u89c6\u9891\u5e7f\u544a","\u641c\u7d22\u5f15\u64ce"]},series:[{name:"\u8bbf\u95ee\u6765\u6e90",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:335,name:"\u76f4\u63a5\u8bbf\u95ee"},{value:310,name:"\u90ae\u4ef6\u8425\u9500"},{value:234,name:"\u8054\u76df\u5e7f\u544a"},{value:135,name:"\u89c6\u9891\u5e7f\u544a"},{value:1548,name:"\u641c\u7d22\u5f15\u64ce"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},style:{height:300}})}),Object(B.jsx)(xe.a,{title:"\u997c\u56fe\u4e8c",children:Object(B.jsx)(tt.a,{option:{backgroundColor:"#2c343c",title:{text:"Customized Pie",left:"center",top:20,textStyle:{color:"#ccc"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},visualMap:{show:!1,min:80,max:600,inRange:{colorLightness:[0,1]}},series:[{name:"\u8bbf\u95ee\u6765\u6e90",type:"pie",radius:"55%",center:["50%","50%"],data:[{value:335,name:"\u76f4\u63a5\u8bbf\u95ee"},{value:310,name:"\u90ae\u4ef6\u8425\u9500"},{value:274,name:"\u8054\u76df\u5e7f\u544a"},{value:235,name:"\u89c6\u9891\u5e7f\u544a"},{value:400,name:"\u641c\u7d22\u5f15\u64ce"}].sort((function(e,t){return e.value-t.value})),roseType:"radius",label:{color:"rgba(255, 255, 255, 0.3)"},labelLine:{lineStyle:{color:"rgba(255, 255, 255, 0.3)"},smooth:.2,length:10,length2:20},itemStyle:{color:"#c23531",shadowBlur:200,shadowColor:"rgba(0, 0, 0, 0.5)"},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]},style:{height:300}})})]})}var ct=fe.a.Option;function st(){var e=Object(i.h)(),t=Object(a.useState)([]),n=Object(J.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(0),o=Object(J.a)(s,2),d=o[0],m=o[1],h=Object(a.useState)(!1),x=Object(J.a)(h,2),p=x[0],f=x[1],g=Object(a.useState)(1),v=Object(J.a)(g,2),y=v[0],w=v[1],C=Object(a.useState)(""),N=Object(J.a)(C,2),A=N[0],_=N[1],R=Object(a.useState)("productName"),F=Object(J.a)(R,2),P=F[0],T=F[1],E=Object(B.jsxs)("span",{children:[Object(B.jsxs)(fe.a,{value:P,style:{width:150},onChange:T,children:[Object(B.jsx)(ct,{value:"productName",children:"\u6309\u540d\u79f0\u641c\u7d22"}),Object(B.jsx)(ct,{value:"productDesc",children:"\u6309\u63cf\u8ff0\u641c\u7d22"})]}),Object(B.jsx)(b.a,{placeholder:"\u5173\u952e\u5b57",style:{width:150,margin:"0 15px"},value:A,onChange:function(e){return _(e.target.value)}}),Object(B.jsx)(O.a,{type:"primary",onClick:function(){w(1),z(1)},children:"\u641c\u7d22"})]}),L=Object(B.jsxs)(O.a,{type:"primary",onClick:function(){return e("addupdate")},children:[Object(B.jsx)(Se.a,{}),"\u6dfb\u52a0\u5546\u54c1"]}),M=[{title:"\u5546\u54c1\u540d\u79f0",dataIndex:"name"},{title:"\u5546\u54c1\u63cf\u8ff0",dataIndex:"desc"},{title:"\u4ef7\u683c",dataIndex:"price",render:function(e){return"\xa5"+e}},{width:100,title:"\u72b6\u6001",render:function(e){var t=e.status,n=e._id;return Object(B.jsxs)("span",{children:[Object(B.jsx)(O.a,{type:"primary",onClick:function(){return D(n,1===t?2:1)},children:1===t?"\u4e0b\u67b6":"\u4e0a\u67b6"}),Object(B.jsx)("span",{children:1===t?"\u5728\u552e":"\u5df2\u4e0b\u67b6"})]})}},{width:100,title:"\u64cd\u4f5c",render:function(t){return Object(B.jsxs)("span",{children:[Object(B.jsx)(re,{onClick:function(){return e("detail",{state:t})},children:"\u8be6\u60c5"}),Object(B.jsx)(re,{onClick:function(){return e("addupdate",{state:t})},children:"\u4fee\u6539"})]})}}],z=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f(!0),!A){e.next=7;break}return e.next=4,I({pageNum:t,pageSize:4,searchName:A,searchType:P});case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,k(t,4);case 9:n=e.sent;case 10:f(!1),0===n.status&&(a=n.data,r=a.total,s=a.list,c(s),m(r));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t,n);case 2:0===e.sent.status&&(j.b.success("\u66f4\u65b0\u5546\u54c1\u6210\u529f"),z(y));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){z(y)}),[y]),Object(B.jsx)(xe.a,{title:E,extra:L,children:Object(B.jsx)(pe.a,{bordered:!0,rowKey:"_id",dataSource:r,columns:M,loading:p,pagination:{current:y,total:d,defaultPageSize:4,showQuickJumper:!0,onChange:w}})})}var it=n(537),ot=n(552),lt=it.b.Item;function ut(){var e=Object(a.useState)(""),t=Object(J.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(J.a)(c,2),o=s[0],j=s[1],d=Object(i.h)(),b=Object(i.g)();console.log(b);var m=b.state,O=m.name,h=m.desc,x=m.price,p=m.detail,f=m.imgs,g=m.pCategoryId,v=m.categoryId,y=Object(B.jsxs)("span",{children:[Object(B.jsx)(re,{children:Object(B.jsx)(ot.a,{style:{marginRight:10,fontSize:20},onClick:function(){return d(-1)}})}),Object(B.jsx)("span",{children:"\u5546\u54c1\u8be6\u60c5"})]}),k=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("0"!==g){e.next=8;break}return e.next=3,w(v);case 3:t=e.sent,n=t.data.name,r(n),e.next=15;break;case 8:return e.next=10,Promise.all([w(g),w(v)]);case 10:a=e.sent,c=a[0].data.name,s=a[1].data.name,r(c),j(s);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){k()}),[]),Object(B.jsx)(xe.a,{title:y,className:"product-detail",children:Object(B.jsxs)(it.b,{bordered:!0,itemLayout:"vertical",children:[Object(B.jsxs)(lt,{children:[Object(B.jsx)("span",{className:"left",children:"\u5546\u54c1\u540d\u79f0\uff1a"}),Object(B.jsx)("span",{children:O})]}),Object(B.jsxs)(lt,{children:[Object(B.jsx)("span",{className:"left",children:"\u5546\u54c1\u63cf\u8ff0\uff1a"}),Object(B.jsx)("span",{children:h})]}),Object(B.jsxs)(lt,{children:[Object(B.jsx)("span",{className:"left",children:"\u5546\u54c1\u4ef7\u683c\uff1a"}),Object(B.jsxs)("span",{children:[x,"\u5143"]})]}),Object(B.jsxs)(lt,{children:[Object(B.jsx)("span",{className:"left",children:"\u6240\u5c5e\u5206\u7c7b\uff1a"}),Object(B.jsxs)("span",{children:[n," ",o?" --\x3e "+o:""]})]}),Object(B.jsxs)(lt,{children:[Object(B.jsx)("span",{className:"left",children:"\u5546\u54c1\u56fe\u7247\uff1a"}),Object(B.jsx)("span",{children:f.map((function(e){return Object(B.jsx)("img",{src:we+e,className:"product-img",alt:"img"},e)}))})]}),Object(B.jsxs)(lt,{children:[Object(B.jsx)("span",{className:"left",children:"\u5546\u54c1\u8be6\u60c5:"}),Object(B.jsx)("span",{dangerouslySetInnerHTML:{__html:p}})]})]})})}var jt=n(290),dt=n(535),bt=n(530),mt=Object(a.forwardRef)((function(e,t){var n=e.imgs,r=[];n&&n.length>0&&(r=n.map((function(e,t){return{uid:-t,name:e,status:"done",url:we+e}})));var c=Object(a.useState)(!1),s=Object(J.a)(c,2),i=s[0],o=s[1],d=Object(a.useState)(""),b=Object(J.a)(d,2),m=b[0],O=b[1],h=Object(a.useState)(r),x=Object(J.a)(h,2),p=x[0],f=x[1];Object(a.useImperativeHandle)(t,(function(){return{getImgs:g}}));var g=function(){return p.map((function(e){return e.name}))},v=Object(B.jsxs)("div",{children:[Object(B.jsx)(Se.a,{}),Object(B.jsx)("div",{children:"Upload"})]}),y=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,r,c,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.file,a=t.fileList,console.log("handleChange()",n.status,a.length,n===a[a.length-1]),console.log(a),"done"!==n.status){e.next=8;break}0===(r=n.response).status?(j.b.success("\u4e0a\u4f20\u56fe\u7247\u6210\u529f!"),c=r.data,s=c.name,i=c.url,(n=a[a.length-1]).name=s,n.url=i):j.b.error("\u4e0a\u4f20\u56fe\u7247\u5931\u8d25"),e.next=13;break;case 8:if("removed"!==n.status){e.next=13;break}return e.next=11,C(n.name);case 11:0===e.sent.status?j.b.success("\u5220\u9664\u56fe\u7247\u6210\u529f!"):j.b.error("\u5220\u9664\u56fe\u7247\u5931\u8d25!");case 13:f(a);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(B.jsxs)("div",{children:[Object(B.jsx)(bt.a,{action:"/manage/img/upload",accept:"image/*",name:"image",listType:"picture-card",fileList:p,onPreview:function(e){console.log("handlePreview()",e),O(e.url||e.thumbUrl),o(!0)},onChange:y,children:p.length>=4?null:v}),Object(B.jsx)(H.a,{visible:i,footer:null,onCancel:function(){return o(!1)},children:Object(B.jsx)("img",{alt:"example",style:{width:"100%"},src:m})})]})})),Ot=n(100),ht=n(282),xt=n(283),pt=n.n(xt),ft=n(284),gt=n.n(ft),vt=(n(518),Object(a.forwardRef)((function(e,t){var n=e.detail,r=Ot.EditorState.createEmpty();if(n){var c=gt()(n),s=Ot.ContentState.createFromBlockArray(c.contentBlocks);r=Ot.EditorState.createWithContent(s)}var i=Object(a.useState)(r),o=Object(J.a)(i,2),l=o[0],u=o[1];Object(a.useImperativeHandle)(t,(function(){return{getDetail:j}}));var j=function(){return pt()(Object(Ot.convertToRaw)(l.getCurrentContent()))};return Object(B.jsx)(ht.Editor,{editorState:l,editorStyle:{border:"1px solid black",minHeight:200,paddingLeft:10},onEditorStateChange:function(e){u(e)},toolbar:{image:{uploadCallback:function(e){return new Promise((function(t,n){var a=new XMLHttpRequest;a.open("POST","/manage/img/upload");var r=new FormData;r.append("image",e),a.send(r),a.addEventListener("load",(function(){var e=JSON.parse(a.responseText).data.url;t({data:{link:e}})})),a.addEventListener("error",(function(){var e=JSON.parse(a.responseText);n(e)}))}))},alt:{present:!0,mandatory:!0}}}})}))),yt=d.a.Item,wt=b.a.TextArea;function kt(){var e=Object(i.h)(),t=Object(a.useRef)(),n=Object(a.useRef)(),r=Object(a.useState)([]),c=Object(J.a)(r,2),s=c[0],o=c[1],m=d.a.useForm(),h=Object(J.a)(m,1)[0],x=Object(i.g)().state,p=x||{},f=p.pCategoryId,g=p.categoryId,y=p.imgs,w=p.detail,k=p._id,S=[];x&&("0"===f||S.push(f),S.push(g));var I=function(){var a=Object(u.a)(l.a.mark((function a(r){var c,s,i,o,u,d,b,m,O;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=r.name,s=r.desc,i=r.price,1===(o=r.categoryIds).length?(u="0",d=o[0]):(u=o[0],d=o[1]),b=t.current.getImgs(),m=n.current.getDetail(),O={name:c,desc:s,price:i,imgs:b,detail:m,pCategoryId:u,categoryId:d},x&&(O._id=k),a.next=8,N(O);case 8:0===a.sent.status?(j.b.success("".concat(x?"\u66f4\u65b0":"\u6dfb\u52a0","\u5546\u54c1\u6210\u529f!")),e(-1)):j.b.error("".concat(x?"\u66f4\u65b0":"\u6dfb\u52a0","\u5546\u54c1\u5931\u8d25!"));case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.map((function(e){return{value:e._id,label:e.name,isLeaf:!1}})),!x||"0"===f){e.next=8;break}return e.next=4,A(f);case 4:a=e.sent,r=a.map((function(e){return{value:e._id,label:e.name}})),n.find((function(e){return e.value===f})).children=r;case 8:o(n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:if(0!==(n=e.sent).status){e.next=12;break}if(a=n.data,"0"!==t){e.next=9;break}C(a),e.next=10;break;case 9:return e.abrupt("return",a);case 10:e.next=13;break;case 12:j.b.error("\u83b7\u53d6\u5206\u7c7b\u5217\u8868\u5931\u8d25");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t[t.length-1]).loading=!0,e.next=4,A(n.value);case 4:a=e.sent,n.loading=!1,a&&a.length>0?(r=a.map((function(e){return{value:e._id,label:e.name}})),n.children=r):n.isLeaf=!0,o(Object(jt.a)(s));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){A("0"),h.setFieldsValue({name:p.name,desc:p.desc,price:p.price,categoryIds:S})}),[]);var R=Object(B.jsxs)("span",{children:[Object(B.jsx)(re,{children:Object(B.jsx)(ot.a,{style:{marginRight:10,fontSize:20},onClick:function(){return e(-1)}})}),Object(B.jsx)("span",{children:x?"\u4fee\u6539\u5546\u54c1":"\u6dfb\u52a0\u5546\u54c1"})]});return Object(B.jsx)(xe.a,{title:R,children:Object(B.jsxs)(d.a,{form:h,labelCol:{span:2},wrapperCol:{span:8},onFinish:I,onFinishFailed:function(e){console.log("\u6821\u9a8c\u5931\u8d25",e)},children:[Object(B.jsx)(yt,{name:"name",label:"\u5546\u54c1\u540d\u79f0",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5546\u54c1\u540d\u79f0"}],children:Object(B.jsx)(b.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0"})}),Object(B.jsx)(yt,{name:"desc",label:"\u5546\u54c1\u63cf\u8ff0",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5546\u54c1\u63cf\u8ff0"}],children:Object(B.jsx)(wt,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u63cf\u8ff0",autosize:{minRows:2,maxRows:6}})}),Object(B.jsx)(yt,{name:"price",label:"\u5546\u54c1\u4ef7\u683c",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5546\u54c1\u4ef7\u683c"},{validator:function(e,t){return t&&1*t<=0?Promise.reject(new Error("\u4ef7\u683c\u5fc5\u987b\u5927\u4e8e0")):Promise.resolve()}}],children:Object(B.jsx)(b.a,{type:"number",placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u4ef7\u683c",addonAfter:"\u5143"})}),Object(B.jsx)(yt,{name:"categoryIds",label:"\u5546\u54c1\u5206\u7c7b",rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5546\u54c1\u5206\u7c7b"}],children:Object(B.jsx)(dt.a,{placeholder:"\u8bf7\u6307\u5b9a\u5546\u54c1\u5206\u7c7b",options:s,loadData:_})}),Object(B.jsx)(yt,{label:"\u5546\u54c1\u56fe\u7247",children:Object(B.jsx)(mt,{ref:t,imgs:y})}),Object(B.jsx)(yt,{label:"\u5546\u54c1\u8be6\u60c5",labelCol:{span:2},wrapperCol:{span:18},children:Object(B.jsx)(vt,{ref:n,detail:w})}),Object(B.jsx)(yt,{children:Object(B.jsx)(O.a,{type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})})]})})}function St(){return Object(B.jsxs)(i.e,{children:[Object(B.jsx)(i.c,{path:"/login",element:Object(B.jsx)(V,{})}),Object(B.jsxs)(i.c,{path:"/",element:Object(B.jsx)(be,{}),children:[Object(B.jsx)(i.c,{index:!0,element:Object(B.jsx)(We,{})}),Object(B.jsx)(i.c,{path:"/category",element:Object(B.jsx)(_e,{})}),Object(B.jsxs)(i.c,{path:"/product",element:Object(B.jsx)(Ye,{}),children:[Object(B.jsx)(i.c,{index:!0,element:Object(B.jsx)(st,{})}),Object(B.jsx)(i.c,{path:"detail",element:Object(B.jsx)(ut,{})}),Object(B.jsx)(i.c,{path:"addupdate",element:Object(B.jsx)(kt,{})})]}),Object(B.jsx)(i.c,{path:"/user",element:Object(B.jsx)(ke,{})}),Object(B.jsx)(i.c,{path:"/role",element:Object(B.jsx)(et,{})}),Object(B.jsx)(i.c,{path:"/charts-bar",element:Object(B.jsx)(nt,{})}),Object(B.jsx)(i.c,{path:"/charts-pie",element:Object(B.jsx)(rt,{})}),Object(B.jsx)(i.c,{path:"/charts-line",element:Object(B.jsx)(at,{})})]}),Object(B.jsx)(i.c,{path:"*",element:Object(B.jsx)(he,{})})]})}n(519);var It=D.getUser();E.user=It,c.a.render(Object(B.jsx)(s.a,{children:Object(B.jsx)(St,{})}),document.getElementById("root"))}},[[520,1,2]]]);
//# sourceMappingURL=main.f82200be.chunk.js.map