{"version":3,"sources":["api/ajax.js","api/index.js","assets/images/logo.jpg","utils/memoryUtils.js","utils/storageUtils.js","pages/login/index.jsx","utils/dateUtils.js","config/menuConfig.js","components/link-button/index.jsx","components/header/index.jsx","components/left-nav/index.jsx","pages/admin/index.jsx","pages/not-found/index.jsx","pages/admin/user/user-form.jsx","utils/constants.js","pages/admin/user/index.jsx","pages/admin/category/add-form.jsx","pages/admin/category/update-form.jsx","pages/admin/category/index.jsx","pages/admin/home/line.jsx","pages/admin/home/bar.jsx","pages/admin/home/index.jsx","pages/admin/product/index.jsx","pages/admin/role/add-form.jsx","pages/admin/role/auth-form.jsx","pages/admin/role/index.jsx","pages/admin/charts/bar/index.jsx","pages/admin/charts/line/index.jsx","pages/admin/charts/pie/index.jsx","pages/admin/product/home/index.jsx","pages/admin/product/detail/index.jsx","pages/admin/product/add-update/pictures-wall.jsx","pages/admin/product/add-update/rich-text-editor.jsx","pages/admin/product/add-update/index.jsx","App.jsx","index.js"],"names":["ajax","url","data","type","Promise","resolve","reject","axios","get","params","post","then","response","catch","error","message","reqLogin","username","password","reqCateGories","parentId","reqAddCateGory","categoryName","reqCategory","categoryId","reqProducts","pageNum","pageSize","reqUpdatesProductsStatus","productId","status","reqSearchProducts","searchName","searchType","reqDeleteImg","name","reqAddOrUpdateProduct","product","_id","reqAddRole","roleName","reqUpdateRole","role","reqAddOrUpdateUser","user","USER_KEY","userLogin","saveUser","store","set","getUser","removeUser","remove","Login","navigate","useNavigate","onFinish","values","a","result","success","memoryUtils","storageUtils","replace","msg","to","className","src","logo","alt","initialValues","remember","onFinishFailed","errorInfo","console","log","Item","rules","required","whitespace","max","min","pattern","prefix","UserOutlined","placeholder","validator","_","value","length","Error","test","LockOutlined","valuePropName","noStyle","href","htmlType","formateDate","time","date","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","menuList","title","key","icon","HomeOutlined","AppstoreAddOutlined","children","BarsOutlined","ToolOutlined","SafetyOutlined","AreaChartOutlined","BarChartOutlined","LineChartOutlined","PieChartFilled","LinkButton","props","confirm","Modal","Header","useState","now","setTime","picUrl","setPicUrl","weather","setWeather","path","useLocation","pathname","getWeather","location","code","text","parseInt","useEffect","timer","setInterval","clearInterval","getTitle","map","item","onClick","ExclamationCircleOutlined","onOk","onCancel","style","color","fontSize","margin","SubMenu","Menu","LeftNav","split","openKey","getMenuNodes","hasAuth","find","cItem","indexOf","isPublic","menus","child","useMemo","selectedKeys","defaultOpenKeys","mode","theme","Footer","Layout","Sider","Content","Admin","minHeight","backgroundColor","textAlign","NotFound","span","Form","Option","Select","UserForm","roles","setForm","phone","email","role_id","useForm","form","setFieldsValue","labelCol","wrapperCol","label","BASE_IMG_URL","User","users","setUsers","setUser","setRoles","roleNames","setRoleNames","isShow","setIsShow","formData","setFormData","showAdd","columns","dataIndex","render","showUpdate","deleteUser","userId","getUsers","addOrUpdateUser","user1","getFieldsValue","resetFields","initRoleNames","reduce","pre","bordered","rowKey","dataSource","pagination","defaultPageSize","visible","AddForm","categories","categoryParentId","c","UpdateForm","categoryData","Category","setCategories","subCategories","setSubCategories","loading","setLoading","setParentId","showStatus","setShowStatus","setTitle","setCategoryData","handleCancel","addCategory","getFieldValue","getCategories","updateCategory","extra","PlusOutlined","width","category","showUpadate","showSubCategories","showFirstCategories","ArrowRightOutlined","marginRight","showQuickJumper","getTheme","LineDemo","chartIns","month","monthAverageRain","average","averageData","Object","keys","averageRain","Number","toFixed","scale","sync","alias","colors","colors10","legendMap","float","height","autoFit","onGetG2Instance","shared","adjust","marginRatio","position","padding","custom","items","marker","symbol","fill","stroke","lineWidth","onChange","ev","checked","unchecked","view","views","filter","val","BarDemo","i","push","DataView","DataSet","dv","source","transform","field","dimension","as","userDv","rows","showTitle","innerRadius","tooltip","Text","content","lineHeight","offset","fontWeight","size","percent","formatter","dateFormat","RangePicker","DatePicker","Home","isVisited","setIsVisited","handleChange","QuestionCircleOutlined","headStyle","suffix","valueStyle","ArrowDownOutlined","marginLeft","ArrowUpOutlined","defaultValue","moment","format","bodyStyle","ReloadOutlined","Product","AuthForm","getMenus","checkedKeys","setCheckedKeys","treeData","disabled","checkable","defaultExpandAll","onCheck","checkedKeysValue","Role","setRole","selectedRowKeys","setSelectedRowKeys","isShowAdd","setIsShowAdd","isShowAuth","setIsShowAuth","setMenus","create_time","getRoles","addRole","updateRole","auth_time","auth_name","rowSelection","onSelect","onRow","event","Bar","sales","setSales","stores","setStores","sale","option","legend","xAxis","yAxis","series","getOption","Line","Pie","subtext","x","trigger","orient","left","radius","center","emphasis","itemStyle","shadowBlur","shadowOffsetX","shadowColor","top","textStyle","visualMap","show","inRange","colorLightness","sort","b","roseType","labelLine","lineStyle","smooth","length2","animationType","animationEasing","animationDelay","idx","Math","random","ProductHome","products","setProducts","total","setTotal","setPageNum","setSearchName","setSearchType","target","getProducts","price","updateStatus","state","list","current","List","ProductDetail","cName1","setCName1","cName2","setCName2","desc","detail","imgs","pCategoryId","ArrowLeftOutlined","getCategory","all","results","itemLayout","img","dangerouslySetInnerHTML","__html","PicturesWall","forwardRef","ref","fileList1","index","uid","previewVisible","setPreviewVisible","previewImage","setPreviewImage","fileList","setFileList","useImperativeHandle","getImgs","file","uploadButton","action","accept","listType","onPreview","thumbUrl","footer","RichTextEditor","editorState1","EditorState","createEmpty","contentBlock","htmlToDraft","contentState","ContentState","createFromBlockArray","contentBlocks","createWithContent","editorState","setEditorState","getDetail","draftToHtml","convertToRaw","getCurrentContent","editorStyle","border","paddingLeft","onEditorStateChange","toolbar","image","uploadCallback","xhr","XMLHttpRequest","open","FormData","append","send","addEventListener","JSON","parse","responseText","link","present","mandatory","TextArea","Input","ProductAddUpdate","pw","useRef","editor","options","setOptions","isUpdate","categoryIds","initOptions","categorys","isLeaf","subCategorys","childOptions","loadData","selectedOptions","targetOption","autosize","minRows","maxRows","addonAfter","App","element","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.f82200be.chunk.js","sourcesContent":["/**\r\n * 发送异步ajax请求的函数模块\r\n * 封装axios库\r\n * 函数返回值promise对象\r\n * 优化1: 统一处理请求异常?\r\n * 在外层包一个自己创建的promise对象\r\n * 在请求出错时, 不reject(error), 而是显示错误提示\r\n * 优化2: 异步得到不是reponse, 而是response.data\r\n * 在请求成功resolve时: resolve(response.data)\r\n */\r\nimport axios from 'axios'\r\nimport { message } from 'antd'\r\nexport default function ajax(url,data={},type='GET') {\r\n    return new Promise((resolve,reject) => {\r\n        let promise;\r\n        // 执行异步ajax请求\r\n        if(type==='GET'){//发GET请求\r\n            promise=axios.get(url,{\r\n                params:data\r\n            })\r\n        }else{//发POST请求\r\n            promise=axios.post(url,data)\r\n        }\r\n        // 如果请求成功了，调用resolve(value)\r\n        promise.then(response => {\r\n            resolve(response.data)\r\n            // console.log(response.data)\r\n        // 如果请求失败了，不调用reject(reason)，而是提示异常信息   \r\n        }).catch(error => {\r\n            message.error('请求出错了：'+error.message)\r\n        })\r\n    })\r\n \r\n}\r\n","/**\r\n * 要求: 能根据接口文档定义接口请求\r\n * 包含应用中所有接口请求函数的模块\r\n * 每个函数的返回值都是promise\r\n */\r\nimport ajax from \"./ajax\";\r\n\r\n// 登陆 ajax第二个参数必须是对象，username:username => username 匹配请求参数\r\nexport const reqLogin = (username, password) => ajax('/login', { username, password }, 'POST')\r\n// 天气\r\nexport const reqWeather = (key, location) => ajax('https://devapi.qweather.com/v7/weather/now', { key, location })\r\n// reqWeather('d6d54c0f8bb54160b97507ce068abda8','101010100')\r\n// 获取一级/二级分类列表\r\nexport const reqCateGories = (parentId) => ajax('/manage/category/list', { parentId })\r\n// 添加分类 传两个属性\r\nexport const reqAddCateGory = (categoryName, parentId) => ajax('/manage/category/add', { categoryName, parentId }, 'POST')\r\n// 更新分类 传一个对象 解构 外部传的时候名字要一致\r\nexport const reqUpdateCateGories = ({ categoryName, categoryId }) => ajax('/manage/category/update', { categoryName, categoryId }, 'POST')\r\n// 获取分类（根据分类ID）\r\nexport const reqCategory = (categoryId) => ajax('/manage/category/info', {categoryId})\r\n// 获取商品分页列表\r\nexport const reqProducts = (pageNum, pageSize) => ajax('/manage/product/list', { pageNum, pageSize })\r\n// 更新商品的状态(上架/下架)\r\nexport const reqUpdatesProductsStatus = (productId, status) => ajax('/manage/product/updateStatus', { productId, status }, 'POST')\r\n// 搜索商品分页列表 (根据商品名称/商品描述)\r\n// searchType: 搜索的类型, productName/productDesc\r\n// searchName: 关键字\r\nexport const reqSearchProducts = ({ pageNum, pageSize, searchName, searchType }) =>\r\n    ajax('/manage/product/search', {\r\n        pageNum,\r\n        pageSize,\r\n        [searchType]: searchName,\r\n    })\r\n// 删除指定名称的图片\r\nexport const reqDeleteImg = (name) => ajax('/manage/img/delete', {name}, 'POST')\r\n// 添加/修改商品 product本身就是对象\r\nexport const reqAddOrUpdateProduct = (product) => ajax('/manage/product/' + ( product._id?'update':'add'), product, 'POST')\r\n// 获取所有角色的列表\r\nexport const reqRoles = () => ajax('/manage/role/list')\r\n// 添加角色\r\nexport const reqAddRole = (roleName) => ajax('/manage/role/add', {roleName}, 'POST')\r\n// 添加角色 role本身就是对象\r\nexport const reqUpdateRole = (role) => ajax('/manage/role/update', role, 'POST')\r\n\r\n\r\n// 获取所有用户的列表\r\nexport const reqUsers = () => ajax('/manage/user/list')\r\n// 删除指定用户\r\nexport const reqDeleteUser = (userId) => ajax('/manage/user/delete', {userId}, 'POST')\r\n// 添加/更新用户 user本身就是对象\r\nexport const reqAddOrUpdateUser = (user) => ajax('/manage/user/'+(user._id ? 'update' : 'add'), user, 'POST')","export default __webpack_public_path__ + \"static/media/logo.83e0c628.jpg\";","/**\r\n * 用来在内存保存一些数据的工具模块\r\n */\r\nconst user = { user: {} }// 保存当前登陆的user\r\nexport default user\r\n","import store from 'store'\r\n/**\r\n * 进行local数据存储管理的工具模块\r\n */\r\n\r\nconst USER_KEY = 'user_key'\r\nconst userLogin = {\r\n  /*\r\n  保存user\r\n   */\r\n  saveUser (user) {\r\n    // localStorage.setItem(USER_KEY, JSON.stringify(user))\r\n    store.set(USER_KEY, user)\r\n  },\r\n\r\n  /*\r\n  读取user\r\n   */\r\n  getUser () {\r\n    // return JSON.parse(localStorage.getItem(USER_KEY) || '{}')\r\n    return store.get(USER_KEY) || {}\r\n  },\r\n\r\n  /*\r\n  删除user\r\n   */\r\n  removeUser () {\r\n    // localStorage.removeItem(USER_KEY)\r\n    store.remove(USER_KEY)\r\n  }\r\n}\r\nexport default userLogin","import React from 'react'\r\nimport { Form, Input, Button, Checkbox, message } from 'antd';\r\nimport { useNavigate,Navigate } from \"react-router-dom\";\r\nimport { reqLogin } from '../../api'\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\r\nimport './index.less'\r\nimport logo from '../../assets/images/logo.jpg'\r\nimport memoryUtils from '../../utils/memoryUtils'\r\nimport storageUtils from '../../utils/storageUtils'\r\n/**\r\n * 登录的路由组件(函数式组件)\r\n * 类式路由组件在onFinish中拿不到history\r\n *  */\r\nexport default function Login() {\r\n    const navigate = useNavigate();\r\n    // 提交表单且数据验证成功后回调事件\r\n    const onFinish = async values => {\r\n        const { username, password } = values;\r\n        const result = await reqLogin(username, password);//发送AJAX\r\n        if (result.status === 0) { // 登陆成功\r\n            message.success('登陆成功')\r\n            // 保存user\r\n            const user = result.data\r\n            memoryUtils.user = user // 保存在内存中\r\n            storageUtils.saveUser(user) // 保存到local中\r\n            // 跳转到管理界面 (不需要再回退回到登陆)\r\n            navigate('/', { replace: true })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n\r\n    }\r\n    // 提交表单且数据验证失败后回调事件\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('校验失败', errorInfo);\r\n    };\r\n    // 如果用户已经登陆, 自动跳转到管理界面\r\n    const user = memoryUtils.user\r\n    if(user && user._id) {\r\n        return <Navigate to='/'/>\r\n    }\r\n\r\n    return (\r\n        <div className=\"login\">\r\n            <header className=\"login-header\">\r\n                <img src={logo} alt=\"logo\" />\r\n                <h1>React项目：后台管理系统</h1>\r\n            </header>\r\n            <section className=\"login-content\">\r\n                <h2>用户登录</h2>\r\n                <Form\r\n                    name=\"normal_login\"\r\n                    className=\"login-form\"\r\n                    initialValues={{ remember: true }}\r\n                    onFinish={onFinish}\r\n                    onFinishFailed={onFinishFailed}\r\n                >\r\n                    <Form.Item\r\n                        name=\"username\"\r\n                        // 校验规则，设置字段的校验逻辑。\r\n                        // whitespace\t如果字段仅包含空格则校验不通过，只在type: 'string' 时生效\r\n                        rules={[\r\n                            { required: true, whitespace: true, message: '请输入你的用户名!' },\r\n                            { max: 12, message: '用户名最多十二位' },\r\n                            { min: 3, message: '用户名至少三位' },\r\n                            { pattern: /^[a-zA-Z0-9_]+$/, message: '用户名必须是英文,数字和下划线组成' },\r\n                        ]}\r\n                    >\r\n                        <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Username\" />\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        name=\"password\"\r\n                        // validator 自定义校验，接收 Promise 作为返回值。\r\n                        rules={[{\r\n                            validator: (_, value) => {\r\n                                if (!value) {\r\n                                    return Promise.reject(new Error('密码必须输入'));\r\n                                } else if (value.length < 3 || value.length > 12) {\r\n                                    return Promise.reject(new Error('密码长度不能小于4位或大于12位'));\r\n                                    // ^表示字符串开始，$表示字符串结束 +号表示重复1到多次\r\n                                    // test检查一个字符串是否符合正则表达式的规则\r\n                                } else if (!/^[a-zA-Z0-9_]+$/.test(value)) {\r\n                                    return Promise.reject(new Error('密码必须是英文，数字和下划线组成'));\r\n                                } else {\r\n                                    return Promise.resolve();\r\n                                }\r\n                            }\r\n                        }]}\r\n                    >\r\n                        <Input\r\n                            prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n                            type=\"password\"\r\n                            placeholder=\"Password\"\r\n                        />\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\r\n                            <Checkbox>记住密码</Checkbox>\r\n                        </Form.Item>\r\n                        <a className=\"login-form-forgot\" href=\"https://www.baidu.com\">忘记密码</a>\r\n                    </Form.Item>\r\n\r\n                    <Form.Item>\r\n                        <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                            登录\r\n                        </Button>\r\n                        或 <a href=\"https://www.baidu.com\">立刻注册!</a>\r\n                    </Form.Item>\r\n                </Form>\r\n            </section>\r\n        </div>\r\n    )\r\n\r\n}","/**\r\n * 包含n个日期时间处理的工具函数模块\r\n */\r\n\r\n// 格式化日期\r\nexport function formateDate(time) {\r\n  if (!time) return ''\r\n  let date = new Date(time)\r\n  return date.getFullYear() + '-' \r\n      + (date.getMonth() + 1) + '-' \r\n      + date.getDate() + ' ' \r\n      + date.getHours() + ':' \r\n      + date.getMinutes() + ':' \r\n      + date.getSeconds()\r\n}","import {\r\n  HomeOutlined,\r\n  AppstoreAddOutlined,\r\n  BarsOutlined,\r\n  ToolOutlined,\r\n  UserOutlined,\r\n  SafetyOutlined,\r\n  AreaChartOutlined,\r\n  BarChartOutlined,\r\n  PieChartFilled,\r\n  LineChartOutlined\r\n} from '@ant-design/icons';\r\n\r\nconst menuList = [\r\n  {\r\n    title: \"首页\", // 菜单标题名称\r\n    key: \"/\", // 对应的 path\r\n    icon: <HomeOutlined/>, // 图标名称\r\n  },\r\n  {\r\n    title: \"商品\",\r\n    key: \"/products\",\r\n    icon: <AppstoreAddOutlined />,\r\n    children: [\r\n      // 子菜单列表\r\n      {\r\n        title: \"品类管理\",\r\n        key: \"/category\",\r\n        icon: <BarsOutlined />,\r\n      },\r\n      {\r\n        title: \"商品管理\",\r\n        key: \"/product\",\r\n        icon: <ToolOutlined />,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    title: \"用户管理\",\r\n    key: \"/user\",\r\n    icon: <UserOutlined />,\r\n  },\r\n  {\r\n    title: \"角色管理\",\r\n    key: \"/role\",\r\n    icon: <SafetyOutlined />,\r\n  },\r\n  {\r\n    title: \"图形图表\",\r\n    key: \"/charts\",\r\n    icon: <AreaChartOutlined/>,\r\n    children: [\r\n      {\r\n        title: \"柱形图\",\r\n        key: \"/charts-bar\",\r\n        icon: <BarChartOutlined/>,\r\n      },\r\n      {\r\n        title: \"折线图\",\r\n        key: \"/charts-line\",\r\n        icon: <LineChartOutlined/>,\r\n      },\r\n      {\r\n        title: \"饼图\",\r\n        key: \"/charts-pie\",\r\n        icon: <PieChartFilled/>,\r\n      },\r\n    ],\r\n  },\r\n];\r\nexport default menuList;\r\n","import React from 'react'\r\nimport './index.less'\r\n/**\r\n * 外形像链接的按钮\r\n */\r\nexport default function LinkButton(props) {\r\n    return <button {...props} className = \"link-button\"></button>\r\n}\r\n","import React,{useState,useEffect} from 'react'\r\nimport {useLocation,useNavigate} from 'react-router-dom'\r\nimport { Modal, message  } from 'antd';\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\r\nimport './index.less'\r\nimport { formateDate } from '../../utils/dateUtils'\r\nimport memoryUtils from '../../utils/memoryUtils'\r\nimport { reqWeather } from '../../api/index'\r\nimport menuList from '../../config/menuConfig'\r\nimport storageUtils from '../../utils/storageUtils'\r\nimport LinkButton from '../link-button'\r\nconst { confirm } = Modal;\r\n/**\r\n * 头部导航组件\r\n */\r\nexport default function Header() {\r\n    const username  = memoryUtils.user.username;\r\n    const [time,setTime] = useState(formateDate(Date.now()));\r\n    const [picUrl,setPicUrl] = useState('');\r\n    const [weather,setWeather] = useState('');\r\n    const path = useLocation().pathname;\r\n    let navigate = useNavigate();\r\n    let title ='';\r\n    // 请求实时天气\r\n    const getWeather = async ()=>{\r\n        const result =await reqWeather('d6d54c0f8bb54160b97507ce068abda8','101010100');\r\n        if(result.code === \"200\"){\r\n            const {now:{icon,text}} = result\r\n            // const {icon,text} =now;\r\n            setPicUrl(icon)\r\n            // console.log(icon)\r\n            if(parseInt(icon)===154){\r\n                setPicUrl(104)\r\n            }\r\n            setWeather(text)\r\n        }else {\r\n            message.error('获取天气信息失败')\r\n        }\r\n        \r\n\r\n    }\r\n    // 动态显示当前时间和天气\r\n    useEffect(()=>{\r\n        getWeather();\r\n\r\n\t\tlet timer = setInterval(()=>{\r\n\t\t\tsetTime(formateDate(Date.now()) )\r\n\t\t},1000)\r\n\t\treturn ()=>{\r\n\t\t\tclearInterval(timer)\r\n\t\t}\r\n\t},[])\r\n    // 动态显示当前标题\r\n    const getTitle = menuList =>{\r\n        return menuList.map(item => {\r\n            if (!item.children) {\r\n                if (item.key===path){\r\n                    title = item.title\r\n                }               \r\n            } else {\r\n                getTitle(item.children)\r\n            }\r\n            return title\r\n          })\r\n    }\r\n    getTitle(menuList)\r\n    // 退出登录\r\n    const logout= () =>{\r\n        confirm({\r\n            title: '确定退出吗?',\r\n            icon: <ExclamationCircleOutlined />,\r\n            // content: '真的确定退出吗',\r\n            onOk() {\r\n              // console.log('OK');\r\n              storageUtils.removeUser()\r\n              memoryUtils.user = {}\r\n              navigate('/login', { replace: true })\r\n            },\r\n            onCancel() {\r\n              console.log('Cancel');\r\n            },\r\n          });\r\n    }\r\n    return (\r\n        <div className=\"header\">\r\n            <div className=\"header-top\">\r\n                <span>欢迎，{username}</span>\r\n                <LinkButton onClick={logout}>退出</LinkButton>\r\n                {/* <a href=\"javascript:\" onClick={logout}>退出</a> */}\r\n            </div>\r\n            <div className=\"header-bottom\">\r\n                <div className=\"header-bottom-left\">{title}</div>\r\n                <div className=\"header-bottom-right\">\r\n                    <span>{time}</span>\r\n                    {/* 图标字体 */}\r\n                    <i className={\"qi-\"+picUrl+\"-fill\"} style={{color:'black',fontSize:'17px',margin:'0 15px'}}/>\r\n                    <span>{weather}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useMemo } from 'react'\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport { Menu } from 'antd';\r\nimport logo from '../../assets/images/logo.jpg'\r\nimport './index.less'\r\nimport menuList from '../../config/menuConfig'\r\nimport memoryUtils from '../../utils/memoryUtils'\r\n\r\nconst { SubMenu } = Menu;\r\n/**\r\n * 左侧导航的组件\r\n */\r\n\r\nexport default function LeftNav() {\r\n  // v5:withRouter高阶组件:包装非路由组件, 返回一个新的组件\r\n  // 新的组件向非路由组件传递3个属性: history/location/match\r\n  // v6:使用useLocation即可得到location属性，withRouter不再使用\r\n  let path = useLocation().pathname; \r\n  path = '/' + path.split(/\\//)[1]// 当前请求的含有子路由界面时过滤子路由地址\r\n  // console.log(path)\r\n  let openKey = '';\r\n  //  根据menu的数据数组生成对应的标签数组 \r\n  // map() 方法创建一个新数组，其结果是该数组中的每个元素都调用一个提供的函数后返回的结果。\r\n  // reduce()也可以实现。\r\n  const getMenuNodes = menuList => {\r\n    return menuList.map(item => {\r\n      if (hasAuth(item)) {\r\n        if (!item.children) {\r\n          return (\r\n            <Menu.Item key={item.key} icon={item.icon}>\r\n              <Link to={item.key}>{item.title}</Link>\r\n            </Menu.Item>\r\n          )\r\n        } else {\r\n          // 查找一个与当前请求路径匹配的子Item\r\n          // find() 方法返回通过测试（函数内判断）的数组的第一个元素的值。\r\n          // const cItem = item.children.find(cItem => cItem.key === path1)\r\n          const cItem = item.children.find(cItem => path.indexOf(cItem.key) === 0)\r\n          // 如果存在, 说明当前item的子列表需要打开\r\n          if (cItem) {\r\n            openKey = item.key     \r\n          }\r\n          \r\n          return (\r\n            <SubMenu key={item.key} icon={item.icon} title={item.title}>\r\n              {getMenuNodes(item.children)}\r\n            </SubMenu>\r\n          )\r\n        }\r\n      }else{\r\n        return null\r\n      } \r\n    })\r\n  }\r\n\r\n  // 判断当前登陆用户对item是否有权限\r\n  const hasAuth = (item) => {\r\n    const { key, isPublic } = item\r\n    const menus = memoryUtils.user.role.menus\r\n    const username = memoryUtils.user.username\r\n    /*\r\n    1. 如果当前用户是admin\r\n    2. 如果当前item是公开的\r\n    3. 当前用户有此item的权限: key有没有menus中\r\n     */\r\n    if (username === 'admin' || isPublic || menus.indexOf(key) !== -1) {\r\n      return true\r\n    } else if (item.children) { // 4. 如果当前用户有此item的某个子item的权限\r\n      return !!item.children.find(child => menus.indexOf(child.key) !== -1)\r\n    }\r\n\r\n    return false\r\n  }\r\n  //出现这个warning的原因是钩子里调用的函数是在外部声明的。\r\n  // 刷新时调用一次，得到初始openKey\r\n  useMemo(() => {\r\n    getMenuNodes(menuList)\r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n  // getMenuNodes(menuList)\r\n  return (\r\n    <div className=\"left-nav\">\r\n\r\n      <Link to='/' className=\"left-nav-header\">\r\n        <img src={logo} alt=\"logo\" />\r\n        <h1>商城后台</h1>\r\n      </Link>\r\n      <Menu\r\n        //初始选中的菜单项 key 数组\r\n        // defaultSelectedKeys={[path]}\r\n        //当前选中的菜单项 key 数组\r\n        selectedKeys={[path]}\r\n        defaultOpenKeys={[openKey]}\r\n\r\n        mode=\"inline\"\r\n        theme=\"dark\"\r\n      >\r\n\r\n        {/* {{}}代表对象,{}代表表达式 */}\r\n        {getMenuNodes(menuList)}\r\n      </Menu>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Layout } from 'antd';\r\nimport { Outlet,Navigate } from 'react-router-dom'\r\nimport memoryUtils from '../../utils/memoryUtils'\r\nimport Header from '../../components/header'\r\nimport LeftNav from '../../components/left-nav'\r\n\r\nconst { Footer, Sider, Content } = Layout;\r\n/**\r\n * 后台管理的路由组件\r\n *  */\r\nexport default function Admin() {\r\n    const user = memoryUtils.user\r\n    // 如果内存没有存储user ==> 当前没有登陆\r\n    if (!user || !user._id) {\r\n        // 自动跳转到登陆(在render()中) Navigate替代Redirect\r\n        return <Navigate to='/login' />\r\n    }\r\n    return (\r\n        //antd的Layout布局\r\n        <Layout style={{ minHeight: '100%' }}>\r\n            <Sider>\r\n                <LeftNav />\r\n            </Sider>\r\n            <Layout>\r\n                <Header />           \r\n                <Content style={{ margin:20,backgroundColor: '#fff' }}>         \r\n                   <Outlet />{/* 占位符 */}\r\n                </Content>\r\n                <Footer style={{ textAlign: 'center', color: '#cccccc' }}>推荐使用谷歌浏览器，可以获得更佳页面操作体验</Footer>\r\n            </Layout>\r\n        </Layout>\r\n    )\r\n\r\n}\r\n","import React from 'react'\r\nimport {Button, Row, Col} from 'antd'\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport './index.less'\r\n/**\r\n * 前台404页面\r\n */\r\n\r\nexport default function NotFound() {\r\n  const navigate = useNavigate();\r\n  return (\r\n    <Row className='not-found'>\r\n        <Col span={12} className='left'></Col>\r\n        <Col span={12} className='right'>\r\n          <h1>404</h1>\r\n          <h2>抱歉，你访问的页面不存在</h2>\r\n          <div>\r\n            <Button type='primary' onClick={() => navigate('/', { replace: true }) }>\r\n              回到首页\r\n            </Button>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n  )\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n  Form,\r\n  Select,\r\n  Input\r\n} from 'antd'\r\n\r\nconst { Item } = Form\r\nconst { Option } = Select\r\n/**\r\n * 添加/修改用户的form组件\r\n */\r\n\r\nexport default function UserForm(props) {\r\n  const { roles, user, setForm } = props\r\n  const { username, _id, password, phone, email, role_id } = user\r\n  console.log(user)\r\n  const [form] = Form.useForm();\r\n  useEffect(() => {\r\n    form.setFieldsValue({ username, password, phone, email, role_id });\r\n    setForm(form)\r\n    // eslint-disable-next-line\r\n  }, [user]);\r\n  return (\r\n    <Form\r\n      form={form}\r\n      labelCol={{ span: 4 }} //左侧label宽度\r\n      wrapperCol={{ span: 15 }}//右侧包裹宽度\r\n    >\r\n      <Item label='用户名' name='username'>\r\n        <Input placeholder='请输入用户名' />\r\n      </Item>\r\n      {\r\n        _id ? null : (\r\n          <Item label='密码' name='password'>\r\n            <Input type='password' placeholder='请输入密码' />\r\n          </Item>\r\n        )\r\n      }\r\n      <Item label='手机号' name='phone'>\r\n        <Input placeholder='请输入手机号' />\r\n      </Item>\r\n      <Item label='邮箱' name='email'>\r\n        <Input placeholder='请输入邮箱' />\r\n      </Item>\r\n      <Item label='角色' name='role_id'>\r\n        <Select>\r\n          {\r\n            roles.map(role => <Option key={role._id} value={role._id}>{role.name}</Option>)\r\n          }\r\n        </Select>\r\n      </Item>\r\n    </Form>\r\n  )\r\n}\r\nUserForm.propTypes = {\r\n  setForm: PropTypes.func.isRequired, // 用来传递form对象的函数\r\n  roles: PropTypes.array.isRequired,\r\n  user: PropTypes.object\r\n}","/**\r\n * 包含一些常量值的模块\r\n */\r\nexport const PAGE_SIZE = 4 // 每页显示的记录数\r\nexport const BASE_IMG_URL = 'http://localhost:5000/upload/' // 上传图片的基础路径","import React, { useState, useEffect } from 'react'\r\nimport { Card, Button, Table, Modal ,message} from 'antd'\r\nimport { formateDate } from '../../../utils/dateUtils'\r\nimport LinkButton from '../../../components/link-button'\r\nimport { reqUsers, reqAddOrUpdateUser,reqDeleteUser } from '../../../api/index'\r\nimport UserForm from './user-form'\r\nimport {PAGE_SIZE} from '../../../utils/constants'\r\n/**\r\n * 用户路由\r\n */\r\nexport default function User() {\r\n    const [users, setUsers] = useState([])\r\n    const [user, setUser] = useState({})\r\n    const [roles, setRoles] = useState([])\r\n    const [roleNames, setRoleNames] = useState([])\r\n    const [isShow, setIsShow] = useState(false)\r\n    const [formData, setFormData] = useState({})\r\n    \r\n\r\n    const title = (<Button type='primary' onClick={()=>showAdd()}>创建用户</Button>)\r\n    const columns = [\r\n        {\r\n            title: '用户名',\r\n            dataIndex: 'username'\r\n        },\r\n        {\r\n            title: '邮箱',\r\n            dataIndex: 'email'\r\n        },\r\n\r\n        {\r\n            title: '电话',\r\n            dataIndex: 'phone'\r\n        },\r\n        {\r\n            title: '注册时间',\r\n            dataIndex: 'create_time',\r\n            render: formateDate\r\n        },\r\n        {\r\n            title: '所属角色',\r\n            dataIndex: 'role_id',\r\n            render: (role_id) => roleNames[role_id]\r\n        },\r\n        {\r\n            title: '操作',\r\n            render: (user) => ( \r\n                <span>\r\n                    <LinkButton onClick={() => showUpdate(user)}>修改</LinkButton>\r\n                    <LinkButton onClick={() => deleteUser(user)}>删除</LinkButton>\r\n                </span>\r\n            )\r\n        },\r\n    ]\r\n    //   显示添加界面\r\n    const showAdd = () => {\r\n        setUser({}) // 去除前面保存的user\r\n        setIsShow(true)\r\n    }\r\n\r\n    //   显示修改界面\r\n    const showUpdate = (user) => {\r\n        setUser(user)// 保存user\r\n        setIsShow(true)\r\n    }\r\n  \r\n    // 删除指定用户\r\n    const deleteUser = (user) => {\r\n        Modal.confirm({\r\n            title: `确认删除${user.username}吗?`,\r\n            onOk: async () => {\r\n                const result = await reqDeleteUser(user._id)\r\n                if (result.status === 0) {\r\n                    message.success('删除用户成功!')\r\n                    getUsers()\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    //   添加/更新用户\r\n    const addOrUpdateUser = async () => {\r\n        setIsShow(false)\r\n        // 1. 收集输入数据\r\n        const user1 = formData.getFieldsValue()\r\n        formData.resetFields()\r\n        // 如果是更新, 需要给user指定_id属性\r\n        if (user1) {\r\n          user1._id = user._id\r\n        }\r\n        // 2. 提交添加的请求\r\n        const result = await reqAddOrUpdateUser(user1)\r\n        // 3. 更新列表显示\r\n        if (result.status === 0) {\r\n            message.success(`${user1 ? '修改' : '添加'}用户成功`)\r\n            getUsers()\r\n        }\r\n    }\r\n    //   根据role的数组, 生成包含所有角色名的对象(属性名用角色id值)\r\n    const initRoleNames = (roles) => {\r\n        const roleNames = roles.reduce((pre, role) => {\r\n            pre[role._id] = role.name\r\n            return pre\r\n        }, {})\r\n        // 保存\r\n        setRoleNames(roleNames)\r\n    }\r\n    // 获取用户信息\r\n    const getUsers = async () => {\r\n        const result = await reqUsers()\r\n        if (result.status === 0) {\r\n            const { users, roles } = result.data\r\n            initRoleNames(roles)\r\n            setUsers(users)\r\n            setRoles(roles)\r\n        }\r\n    }\r\n    // eslint-disable-next-line  \r\n    useEffect(() => { getUsers() }, [])\r\n    return (\r\n        <Card title={title}>\r\n            <Table\r\n                bordered\r\n                rowKey='_id'\r\n                dataSource={users}\r\n                columns={columns}\r\n                pagination={{ defaultPageSize: PAGE_SIZE }}\r\n            />\r\n            <Modal\r\n                title={user._id ? '修改用户' : '添加用户'}\r\n                visible={isShow}\r\n                onOk={addOrUpdateUser}\r\n                onCancel={() => {\r\n                    formData.resetFields()\r\n                    setIsShow(false)\r\n                }}\r\n            >\r\n                <UserForm\r\n                    setForm={form => setFormData(form)}\r\n                    roles={roles}\r\n                    user={user}\r\n                />\r\n            </Modal>\r\n        </Card>\r\n    )\r\n}\r\n","import React,{useEffect} from 'react'\r\nimport { Form, Select, Input } from 'antd'\r\nimport PropTypes from 'prop-types'\r\nconst { Option } = Select;\r\n/**\r\n * 添加分类的form组件\r\n */\r\nexport default function AddForm(props) {\r\n    const { categories, parentId,setForm } = props\r\n    const [form] = Form.useForm();\r\n    useEffect(() => {\r\n        form.setFieldsValue({ categoryParentId:parentId });\r\n        setForm(form)\r\n    // eslint-disable-next-line\r\n    }, [parentId]);\r\n    return (\r\n        <Form form={form}>\r\n            <Form.Item name='categoryParentId' >\r\n                <Select>\r\n                    <Option value='0'>一级分类</Option>\r\n                    {\r\n                        categories.map(c =><Option value={c._id} key={c._id}>{c.name}</Option>)\r\n                    }\r\n                </Select>\r\n            </Form.Item>\r\n            <Form.Item \r\n            name='categoryName'  \r\n            rules={[{ required: true, message: \"分类名称必须输入\" }]}\r\n            >\r\n                <Input placeholder='请输入分类名称' />\r\n            </Form.Item>\r\n        </Form>\r\n    )\r\n}\r\nAddForm.propTypes = {\r\n    categories:PropTypes.array.isRequired,//一级分类的数组\r\n    parentId:PropTypes.string.isRequired,//父分类的ID\r\n    setForm: PropTypes.func.isRequired,\r\n\r\n}","import React, { useEffect } from 'react'\r\nimport { Form, Input } from 'antd'\r\nimport PropTypes from 'prop-types'\r\n\r\n/**\r\n * 更新分类的form组件\r\n */\r\nexport default function UpdateForm(props) {\r\n    // 连续解构赋值加重命名\r\n    const { categoryData:{name:categoryName}, setForm } = props\r\n    // 创建 Form 实体\r\n    const [form] = Form.useForm();\r\n    //{ categoryName:categoryName}=>{ categoryName} \r\n    // 第一个是Form.Item的name，第二个是父组件传来的categoryName\r\n    useEffect(() => {\r\n        form.setFieldsValue({ categoryName });\r\n        setForm(form)\r\n    // eslint-disable-next-line\r\n    }, [categoryName]);\r\n    console.log(setForm)\r\n    console.log(typeof(categoryName))\r\n    return (\r\n        <Form form={form}>\r\n            <Form.Item name='categoryName' rules={[{ required: true, message: \"分类名称必须输入\" }]}>\r\n                <Input placeholder='请输入分类名称' />\r\n            </Form.Item>\r\n        </Form>\r\n    )\r\n}\r\n//对接收的props进行：类型、必要性的限制\r\nUpdateForm.propTypes = {\r\n    setForm: PropTypes.func.isRequired,\r\n    categoryData:PropTypes.object.isRequired\r\n\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Card, Table, Button, message, Modal } from 'antd'\r\nimport { PlusOutlined, ArrowRightOutlined } from '@ant-design/icons'\r\nimport LinkButton from '../../../components/link-button'\r\nimport { reqCateGories, reqUpdateCateGories,reqAddCateGory } from '../../../api/index'\r\nimport AddForm from './add-form'\r\nimport UpdateForm from './update-form'\r\n\r\n/**\r\n * 商品分类路由\r\n */\r\nexport default function Category() {\r\n    const [categories, setCategories] = useState([]);// 一级分类列表\r\n    const [subCategories, setSubCategories] = useState([]);// 二级分类列表\r\n    const [loading, setLoading] = useState(false);//是否正在获取数据中\r\n    const [parentId, setParentId] = useState('0');//当前需要显示的分类列表的父分类ID\r\n    // const [parentName, setParentName] = useState('');//当前需要显示的分类列表的父分类名称\r\n    // 确认框 0：都不显示 1 显示添加 2 显示更新\r\n    const [showStatus, setShowStatus] = useState('0');\r\n    const [title, setTitle] = useState('一级分类列表');   // 左上角标题\r\n    const [categoryData, setCategoryData] = useState({}) //当前行的值\r\n    const [formData, setFormData] = useState({})//获得子组件传回的表单实体\r\n    // 显示添加的确认框\r\n    const showAdd = () => {\r\n        setShowStatus(1)\r\n    }\r\n    // 显示更新的确认框\r\n    const showUpadate = (category) => {\r\n        setCategoryData(category)\r\n        setShowStatus(2)\r\n    }\r\n    // 响应点击取消\r\n    const handleCancel = () => {\r\n        setShowStatus(0)\r\n    }\r\n    // 添加分类\r\n    const addCategory = async () => {\r\n        setShowStatus(0)\r\n        const {categoryParentId,categoryName} = formData.getFieldValue()\r\n        const result = await reqAddCateGory(categoryName, categoryParentId)\r\n        // 添加的父ID和当前父ID相同时，重新获取当前分类列表显示\r\n        if (result.status === 0 && parentId === categoryParentId) {\r\n            getCategories(parentId)\r\n        }\r\n\r\n    }\r\n    // 更新分类\r\n    const updateCategory = async () => {\r\n        setShowStatus(0)\r\n        const categoryId = categoryData._id\r\n        const categoryName = formData.getFieldValue('categoryName')\r\n        const result = await reqUpdateCateGories({ categoryName, categoryId })\r\n        if (result.status === 0) {\r\n            // 重新获取当前分类列表显示\r\n            getCategories(parentId)\r\n        }\r\n    }\r\n    const extra = (\r\n        <Button type='primary' onClick={showAdd}>\r\n            <PlusOutlined />\r\n            添加\r\n        </Button>\r\n    )\r\n\r\n    const columns = [\r\n        {\r\n            title: '分类名称',\r\n            dataIndex: 'name',//显示数据对应属性名\r\n        },\r\n        {\r\n            title: '操作',\r\n            width: 300,\r\n            // 参数分别为当前行的值\r\n            render: category => (//返回需要显示的界面标签\r\n                <span>\r\n                    {/* {console.log(category)} */}\r\n                    <LinkButton onClick={() => showUpadate(category)}>修改分类</LinkButton>\r\n                    {/*如何向事件回调函数传递参数: 先定义一个匿名函数, 在函数调用处理的函数并传入数据*/}\r\n                    {parentId === '0'\r\n                        ? <LinkButton onClick={() => showSubCategories(category)}>\r\n                            查看子分类\r\n                        </LinkButton>\r\n                        : null}\r\n\r\n                </span>\r\n            ),\r\n        }\r\n    ];\r\n\r\n    // 异步获取一级/二级分类列表\r\n    const getCategories = async (parentId) => {\r\n        setLoading(true);\r\n        const result = await reqCateGories(parentId);\r\n        setLoading(false);\r\n        if (result.status === 0) {\r\n            if (parentId === '0') {\r\n                setCategories(result.data)\r\n            } else {\r\n                setSubCategories(result.data)\r\n            }\r\n\r\n        } else {\r\n            message.error('获取分类列表失败')\r\n        }\r\n    }\r\n    //返回一级分类对列表\r\n    const showFirstCategories = () => {\r\n        setParentId('0')\r\n        setSubCategories([])\r\n        // setParentName('')\r\n        setTitle('一级分类列表')\r\n    }\r\n    //显示指定一级分类对象的二级列表\r\n    const showSubCategories = (category) => {\r\n        setParentId(category._id)\r\n        // setParentName(category.name)\r\n        setTitle(\r\n            <span>\r\n                {console.log(category.name)}\r\n                <LinkButton onClick={showFirstCategories}>一级分类列表</LinkButton>\r\n                <ArrowRightOutlined style={{ marginRight: 5 }} />\r\n                <span>{category.name}</span>\r\n            </span>\r\n        )\r\n    }\r\n    // 父子分类切换时，重新获取当前分类列表显示\r\n    // eslint-disable-next-line  \r\n    useEffect(() => { getCategories(parentId) }, [parentId])\r\n\r\n    return (\r\n        <Card title={title} extra={extra} >\r\n            <Table\r\n                rowKey='_id'\r\n                bordered\r\n                pagination={{ defaultPageSize: 5, showQuickJumper: true }}\r\n                loading={loading}\r\n                dataSource={parentId === '0' ? categories : subCategories}\r\n                columns={columns} />\r\n            <Modal\r\n                title=\"添加分类\"\r\n                visible={showStatus === 1}\r\n                onOk={addCategory}\r\n                onCancel={handleCancel}>\r\n                <AddForm\r\n                    categories={categories}\r\n                    parentId={parentId}\r\n                    setForm={(form) => setFormData(form)}\r\n                />\r\n            </Modal>\r\n            <Modal\r\n                title=\"更新分类\"\r\n                visible={showStatus === 2}\r\n                onOk={updateCategory}\r\n                onCancel={handleCancel}>\r\n                <UpdateForm\r\n                    categoryData={categoryData}\r\n                    setForm={(form) => setFormData(form)}\r\n                />\r\n            </Modal>\r\n        </Card>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Axis,\r\n  Chart,\r\n  Tooltip,\r\n  Interval,\r\n  View,\r\n  Line,\r\n  Legend,\r\n  getTheme\r\n} from \"bizcharts\";\r\n\r\nconst theme = getTheme();\r\n\r\n\r\nexport default function LineDemo() {\r\n  const data = [\r\n    { name: 'London', month: 'Jan.', monthAverageRain: 18.9 },\r\n    { name: 'London', month: 'Feb.', monthAverageRain: 28.8 },\r\n    { name: 'London', month: 'Mar.', monthAverageRain: 39.3 },\r\n    { name: 'London', month: 'Apr.', monthAverageRain: 81.4 },\r\n    { name: 'London', month: 'May', monthAverageRain: 47 },\r\n    { name: 'London', month: 'Jun.', monthAverageRain: 20.3 },\r\n    { name: 'London', month: 'Jul.', monthAverageRain: 24 },\r\n    { name: 'London', month: 'Aug.', monthAverageRain: 35.6 },\r\n    { name: 'Berlin', month: 'Jan.', monthAverageRain: 12.4 },\r\n    { name: 'Berlin', month: 'Feb.', monthAverageRain: 23.2 },\r\n    { name: 'Berlin', month: 'Mar.', monthAverageRain: 34.5 },\r\n    { name: 'Berlin', month: 'Apr.', monthAverageRain: 99.7 },\r\n    { name: 'Berlin', month: 'May', monthAverageRain: 52.6 },\r\n    { name: 'Berlin', month: 'Jun.', monthAverageRain: 35.5 },\r\n    { name: 'Berlin', month: 'Jul.', monthAverageRain: 37.4 },\r\n    { name: 'Berlin', month: 'Aug.', monthAverageRain: 42.4 },\r\n  ];\r\n  const average = data.reduce((pre, item) => {\r\n    const { month, monthAverageRain } = item;\r\n    if (!pre[month]) {\r\n      pre[month] = 0\r\n    }\r\n    pre[month] += (monthAverageRain);\r\n    return pre;\r\n  }, {});\r\n\r\n  const averageData = Object.keys(average).map(key => {\r\n    return { month: key, averageRain: Number((average[key] / 2).toFixed(2)), name: 'avg' }\r\n  })\r\n\r\n  const scale = {\r\n    month: {\r\n      sync: true\r\n    },\r\n    averageRain: {\r\n      min: 0,\r\n      max: 100,\r\n      alias: 'Average'\r\n    },\r\n    monthAverageRain: {\r\n      min: 0,\r\n      max: 100\r\n    }\r\n  }\r\n\r\n  const colors = theme.colors10;\r\n  /**\r\n   * 图例开关状态\r\n   */\r\n  let legendMap = {}\r\n  /**\r\n   * 图表实例\r\n   */\r\n  let chartIns;\r\n  return (\r\n    <div style={{ float: 'right', width: 750, height: 300 }}>\r\n      <Chart height={250}  scale={scale}\r\n        data={data} autoFit\r\n        onGetG2Instance={c => chartIns = c}>\r\n        <Tooltip shared />\r\n        <Interval\r\n          adjust={[\r\n            {\r\n              type: 'dodge',\r\n              marginRatio: 0,\r\n            },\r\n          ]}\r\n          color={[\"name\", colors]}\r\n          position=\"month*monthAverageRain\"\r\n        />\r\n        <Axis name='monthAverageRain' position='left' />\r\n        <View data={averageData} scale={scale} padding={0} >\r\n          <Axis name='averageRain' position='right' />\r\n          <Line\r\n            position=\"month*averageRain\"\r\n            color={colors[2]}\r\n          />\r\n        </View>\r\n        <Legend custom={true} items={[\r\n          {\r\n            name: \"London\", value: 'London', marker: {\r\n              symbol: 'square',\r\n              style: { fill: colors[0] }\r\n            }\r\n          },\r\n          {\r\n            name: \"Berlin\", value: 'Berlin', marker: {\r\n              symbol: 'square',\r\n              style: { fill: colors[1] }\r\n            }\r\n          },\r\n          {\r\n            name: \"平均\", value: 'avg', marker: {\r\n              symbol: 'hyphen',\r\n              style: { stroke: colors[2], lineWidth: 2 }\r\n            },\r\n          }]}\r\n          onChange={(ev) => {\r\n            const { item } = ev;\r\n            const { value } = item;\r\n            const checked = !item.unchecked;\r\n            // 设置图例项状态\r\n            legendMap[value] = checked;\r\n            if (value === 'avg') {\r\n              // 通过filter控制元素显示隐藏\r\n              const view = chartIns.views[0];\r\n              view.filter('name', (val) => {\r\n                return legendMap[val]\r\n              })\r\n              // 重新渲染，触发filter\r\n              view.render(true)\r\n            } else {\r\n              // 通过filter控制元素显示隐藏\r\n              chartIns.filter('name', (val) => {\r\n                return legendMap[val] !== false\r\n              })\r\n              // 重新渲染，触发filter\r\n              chartIns.render(true)\r\n            }\r\n          }}\r\n        />\r\n\r\n      </Chart>\r\n    </div>\r\n  )\r\n}","import React from \"react\"\r\nimport {\r\n  Chart,\r\n  Interval,\r\n  Axis,\r\n  Tooltip,\r\n  Coordinate,\r\n  Legend,\r\n  View,\r\n  Annotation,\r\n} from \"bizcharts\";\r\nimport DataSet from \"@antv/data-set\";\r\n\r\nexport default function BarDemo() {\r\n  const text = [\r\n    \"MIDNIGHT\",\r\n    \"3 AM\",\r\n    \"6 AM\",\r\n    \"9 AM\",\r\n    \"NOON\",\r\n    \"3 PM\",\r\n    \"6 PM\",\r\n    \"9 PM\"\r\n  ];\r\n  const data = [];\r\n\r\n  for (let i = 0; i < 24; i++) {\r\n    const item = {};\r\n    item.type = i + \"\";\r\n    item.value = 10;\r\n    data.push(item);\r\n  }\r\n\r\n  const { DataView } = DataSet;\r\n  const dv = new DataView();\r\n  dv.source(data).transform({\r\n    type: \"percent\",\r\n    field: \"value\",\r\n    dimension: \"type\",\r\n    as: \"percent\"\r\n  });\r\n  const userData = [\r\n    { type: '睡觉', value: 30 },\r\n    { type: '晨练', value: 5 },\r\n    { type: '上班', value: 40 },\r\n    { type: '亲子互动', value: 5 },\r\n    { type: '辅导作业', value: 5 },\r\n    { type: '练球&瑜伽', value: 5 },\r\n    { type: '洗澡', value: 5 },\r\n    { type: '阅读充电', value: 5 },\r\n  ];\r\n  const userDv = new DataView();\r\n  userDv.source(userData).transform({\r\n    type: 'percent',\r\n    field: 'value',\r\n    dimension: 'type',\r\n    as: 'percent',\r\n  });\r\n  // const cols = {\r\n  //   percent: {\r\n  //     formatter: val => {\r\n  //       return (val * 100).toFixed(2) + \"%\";\r\n  //     }\r\n  //   },\r\n  //   value: {\r\n  //     formatter: val => {\r\n  //       return (val * 100).toFixed(2) + \"%\";\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  return (\r\n    <div >\r\n      <Chart placeholder={false} height={400} padding={50} autoFit>\r\n        <Legend visible={false} />\r\n        {/* 背景图层 */}\r\n        <View data={dv.rows}>\r\n          <Legend visible={false} />\r\n          <Tooltip shared showTitle={false} />\r\n          <Coordinate type=\"theta\" innerRadius={0.9} />\r\n          <Interval\r\n            position=\"percent\"\r\n            adjust=\"stack\"\r\n            color={['type', ['rgba(255, 255, 255, 0)']]}\r\n            style={{\r\n              stroke: '#444',\r\n              lineWidth: 1,\r\n            }}\r\n            tooltip={false}\r\n          />\r\n          <Annotation.Text\r\n            position={['50%', '40%']}\r\n            content=\"Dream\"\r\n            style={{\r\n              lineHeight: '240px',\r\n              fontSize: '30',\r\n              fill: '#262626',\r\n              textAlign: 'center',\r\n            }}\r\n          />\r\n          <Annotation.Text\r\n            position={['50%', '60%']}\r\n            content=\"24hours\"\r\n            style={{\r\n              lineHeight: '240px',\r\n              fontSize: '30',\r\n              fill: '#262626',\r\n              textAlign: 'center',\r\n            }}\r\n          />\r\n        </View>\r\n        <View data={data}>\r\n          <Axis visible={false} />\r\n          <Coordinate type=\"polar\" innerRadius={0.9} />\r\n          <Interval\r\n            position=\"type*value\"\r\n            color=\"#444\"\r\n            label={['type',\r\n              (val) => {\r\n                return {\r\n                  content: val % 3 === 0 ? text[val / 3] : '',\r\n                };\r\n              },\r\n              {\r\n                offset: 15,\r\n                style: {\r\n                  fontSize: 12,\r\n                  fontWeight: 'bold',\r\n                  fill: '#bfbfbf',\r\n                },\r\n              }]}\r\n            tooltip={false}\r\n            size={['type', (val) => {\r\n              if (val % 3 === 0) {\r\n                return 4;\r\n              }\r\n              return 1;\r\n            }]}\r\n          />\r\n        </View>\r\n        {/* 绘制图形 */}\r\n        <View data={userDv.rows} scale={{\r\n          percent: {\r\n            formatter: (val) => {\r\n              return (val * 100).toFixed(2) + '%';\r\n            },\r\n          }\r\n        }}>\r\n          <Coordinate type=\"theta\" innerRadius={0.75} />\r\n          <Interval\r\n            position=\"percent\"\r\n            adjust=\"stack\"\r\n            color=\"type\"\r\n            label={['type', { offset: 40 }]}\r\n          />\r\n        </View>\r\n      </Chart>\r\n    </div>\r\n  )\r\n}","import React, { useState } from 'react'\r\nimport {\r\n    Card,\r\n    Statistic,\r\n    DatePicker,\r\n    Timeline\r\n} from 'antd'\r\nimport { ReloadOutlined, ArrowUpOutlined, QuestionCircleOutlined, ArrowDownOutlined } from '@ant-design/icons'\r\nimport moment from 'moment'\r\n\r\nimport LineDemo from './line'\r\nimport BarDemo from './bar'\r\nimport './index.less'\r\n\r\nconst dateFormat = 'YYYY/MM/DD'\r\nconst { RangePicker } = DatePicker\r\n\r\nexport default function Home() {\r\n    const [isVisited, setIsVisited] = useState(true)\r\n    const handleChange = (isVisited) => {\r\n        return () => setIsVisited(isVisited)\r\n    }\r\n    return (\r\n        <div className='home'>\r\n            <Card\r\n                className=\"home-card\"\r\n                title=\"商品总量\"\r\n                extra={<QuestionCircleOutlined style={{ color: 'rgba(0,0,0,.45)' }} />}\r\n                style={{ width: 250 }}\r\n                headStyle={{ color: 'rgba(0,0,0,.45)' }}\r\n            >\r\n                <Statistic\r\n                    value={1128163}\r\n                    suffix=\"个\"\r\n                    style={{ fontWeight: 'bolder' }}\r\n                />\r\n                <Statistic\r\n                    value={15}\r\n                    valueStyle={{ fontSize: 15 }}\r\n                    prefix={'周同比'}\r\n                    suffix={<div>%<ArrowDownOutlined style={{ color: 'red', marginLeft: 10 }} /></div>}\r\n                />\r\n                <Statistic\r\n                    value={10}\r\n                    valueStyle={{ fontSize: 15 }}\r\n                    prefix={'日同比'}\r\n                    suffix={<div>%<ArrowUpOutlined style={{ color: '#3f8600', marginLeft: 10 }} /></div>}\r\n                />\r\n            </Card>\r\n\r\n            <LineDemo/>\r\n\r\n            <Card\r\n                className=\"home-content\"\r\n                title={<div className=\"home-menu\">\r\n                    <span className={isVisited ? \"home-menu-active home-menu-visited\" : 'home-menu-visited'}\r\n                        onClick={handleChange(true)}>访问量</span>\r\n                    <span className={isVisited ? \"\" : 'home-menu-active'} onClick={handleChange(false)}>销售量</span>\r\n                </div>}\r\n                extra={<RangePicker\r\n                    defaultValue={[moment('2019/01/01', dateFormat), moment('2019/06/01', dateFormat)]}\r\n                    format={dateFormat}\r\n                />}\r\n            >\r\n                <Card\r\n                    className=\"home-table-left\"\r\n                    title={isVisited ? '访问趋势' : '销售趋势'}\r\n                    bodyStyle={{ padding: 0, height: 350 }}\r\n                    extra={<ReloadOutlined />}\r\n                >\r\n                    <BarDemo />\r\n                </Card>\r\n\r\n                <Card title='任务' extra={<ReloadOutlined />} className=\"home-table-right\">\r\n                    <Timeline>\r\n                        <Timeline.Item color=\"green\">新版本迭代会</Timeline.Item>\r\n                        <Timeline.Item color=\"green\">完成网站设计初版</Timeline.Item>\r\n                        <Timeline.Item color=\"red\">\r\n                            <p>联调接口</p>\r\n                            <p>功能验收</p>\r\n                        </Timeline.Item>\r\n                        <Timeline.Item>\r\n                            <p>登录功能设计</p>\r\n                            <p>权限验证</p>\r\n                            <p>页面排版</p>\r\n                        </Timeline.Item>\r\n                    </Timeline>\r\n                </Card>\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Outlet} from 'react-router-dom'\r\nimport './index.less'\r\nexport default function Product() {\r\n    return (\r\n        <div>\r\n            <Outlet/>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { Form, Input } from 'antd'\r\nimport PropTypes from 'prop-types'\r\n\r\n/**\r\n * 添加分类的form组件\r\n */\r\nexport default function AddForm(props) {\r\n    const { setForm } = props\r\n    const [form] = Form.useForm();\r\n    useEffect(() => {\r\n        setForm(form)\r\n        // eslint-disable-next-line\r\n    }, []);\r\n    return (\r\n        <Form form={form}>\r\n\r\n            <Form.Item\r\n                label='角色名称'\r\n                name='roleName'\r\n                rules={[{ required: true, message: \"角色名称必须输入\" }]}\r\n            >\r\n                <Input placeholder='请输入角色名称' />\r\n            </Form.Item>\r\n        </Form>\r\n    )\r\n}\r\nAddForm.propTypes = {\r\n    setForm: PropTypes.func.isRequired,\r\n\r\n}","import React,{useState,useEffect} from 'react'\r\nimport {\r\n    Form,\r\n    Input,\r\n    Tree\r\n} from 'antd'\r\nimport menuList from '../../../config/menuConfig'\r\nconst Item = Form.Item\r\n\r\nexport default function AuthForm(props) {\r\n    const { role,getMenus } = props\r\n    const {menus} = role\r\n    const [checkedKeys, setCheckedKeys] = useState([]);\r\n    const treeData = [\r\n        {\r\n          title: '平台权限',\r\n          key: 'all',\r\n          children:menuList\r\n        }\r\n    ]\r\n    const onCheck = (checkedKeysValue) => {\r\n        setCheckedKeys(checkedKeysValue);\r\n        \r\n      };\r\n  \r\n    useEffect(() => {\r\n        setCheckedKeys(menus) \r\n     // eslint-disable-next-line  \r\n    }, [menus])\r\n    useEffect(() => {\r\n        getMenus(checkedKeys)  \r\n     // eslint-disable-next-line  \r\n    }, [checkedKeys])\r\n    \r\n    return (\r\n        <Form>\r\n            <Item label='角色名称' >\r\n                <Input value={role.name} disabled />\r\n            </Item>\r\n            <Tree\r\n                checkable\r\n                defaultExpandAll={true}//默认展开\r\n                checkedKeys={checkedKeys}\r\n                onCheck={onCheck}\r\n                treeData={treeData}\r\n            />\r\n        </Form>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport {\r\n  Card,\r\n  Button,\r\n  Table,\r\n  Modal,\r\n  message\r\n} from 'antd'\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { PAGE_SIZE } from '../../../utils/constants'\r\nimport { reqRoles, reqAddRole,reqUpdateRole } from '../../../api/index'\r\nimport AddForm from './add-form'\r\nimport AuthForm from './auth-form'\r\nimport memoryUtils from '../../../utils/memoryUtils'\r\nimport storageUtils from '../../../utils/storageUtils'\r\nimport {formateDate} from '../../../utils/dateUtils'\r\n/**\r\n * 角色路由 \r\n * */\r\nexport default function Role() {\r\n  const navigate = useNavigate();\r\n  const [roles, setRoles] = useState([])// 所有角色的列表\r\n  const [role, setRole] = useState({})// 选中的role\r\n  const [selectedRowKeys, setSelectedRowKeys] = useState([])\r\n  const [isShowAdd, setIsShowAdd] = useState(false)// 是否显示添加界面\r\n  const [isShowAuth, setIsShowAuth] = useState(false)// 是否显示设置权限界面\r\n  const [formData, setFormData] = useState({})//获得子组件传回的表单实体\r\n  const [menus,setMenus]=useState([])\r\n  // console.log(menus)\r\n  const title = (\r\n    <span>\r\n      <Button type='primary' onClick={() => setIsShowAdd(true)}>创建角色</Button> &nbsp;&nbsp;\r\n      <Button type='primary' disabled={!role._id} onClick={() => setIsShowAuth(true)}>设置角色权限</Button>\r\n    </span>\r\n  )\r\n  const columns = [\r\n    {\r\n      title: '角色名称',\r\n      dataIndex: 'name'\r\n    },\r\n    {\r\n      title: '创建时间',\r\n      dataIndex: 'create_time',\r\n      render: (create_time) => formateDate(create_time)\r\n    },\r\n    {\r\n      title: '授权时间',\r\n      dataIndex: 'auth_time',\r\n      render: formateDate\r\n    },\r\n    {\r\n      title: '授权人',\r\n      dataIndex: 'auth_name'\r\n    },\r\n  ]\r\n  const onRow = (role) => {\r\n    return {\r\n      onClick: event => { // 点击行\r\n        // console.log('row onClick()', role)\r\n        setRole(role)\r\n        setSelectedRowKeys([role._id])\r\n      },\r\n    }\r\n  }\r\n  // 获取角色\r\n  const getRoles = async () => {\r\n    const result = await reqRoles()\r\n    if (result.status === 0) {\r\n      const roles = result.data\r\n      setRoles(roles)\r\n\r\n    }\r\n  }\r\n  // 添加角色\r\n  const addRole = async () => {\r\n    setIsShowAdd(false)// 执行完函数后关闭添加表单\r\n    // 收集输入数据\r\n    const { roleName } = formData.getFieldValue()\r\n    const result = await reqAddRole(roleName)\r\n    if (result.status === 0) {\r\n      message.success('添加角色成功')\r\n      getRoles()\r\n    } else {\r\n      message.error('添加角色失败')\r\n    }\r\n    formData.resetFields()//清空输入内容\r\n\r\n  }\r\n  \r\n  // 更新角色\r\n  const updateRole = async () => {\r\n    setIsShowAuth(false)\r\n    role.menus = menus\r\n    role.auth_time = Date.now()\r\n    role.auth_name = memoryUtils.user.username\r\n    console.log(role)\r\n    // 请求更新\r\n    const result = await reqUpdateRole(role)\r\n    if (result.status===0) {\r\n      // 如果当前更新的是自己角色的权限, 强制退出\r\n      if (role._id === memoryUtils.user.role_id) {\r\n        memoryUtils.user = {}\r\n        storageUtils.removeUser()\r\n        navigate('/login', { replace: true })\r\n        message.success('当前用户角色权限成功')\r\n      } else {\r\n        message.success('设置角色权限成功')\r\n        \r\n\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n  // eslint-disable-next-line  \r\n  useEffect(() => { getRoles() }, [])\r\n  return (\r\n    <Card title={title}>\r\n      <Table\r\n        bordered\r\n        rowKey='_id'\r\n        dataSource={roles}\r\n        columns={columns}\r\n        pagination={{ defaultPageSize: PAGE_SIZE }}\r\n        rowSelection={{\r\n          type: 'radio',\r\n          selectedRowKeys,\r\n          onChange: (selectedRowKeys) => setSelectedRowKeys(selectedRowKeys),\r\n          onSelect: (role) => setRole(role) // 选择某个radio时回调\r\n            \r\n        }}\r\n        onRow={onRow}\r\n      />\r\n      <Modal\r\n        title=\"添加角色\"\r\n        visible={isShowAdd}\r\n        onOk={addRole}\r\n        onCancel={() => {\r\n          setIsShowAdd(false)\r\n          formData.resetFields()//清空输入内容\r\n        }}>\r\n        <AddForm\r\n          setForm={(form) => setFormData(form)}\r\n        />\r\n      </Modal>\r\n      <Modal\r\n        title=\"设置角色权限\"\r\n        visible={isShowAuth}\r\n        onOk={updateRole}\r\n        onCancel={() => {\r\n          setIsShowAuth(false)\r\n        }}>\r\n        <AuthForm role={role} getMenus={(menus)=>setMenus(menus)}/>\r\n      </Modal>\r\n    </Card>\r\n  )\r\n}\r\n","import React, { useState } from 'react'\r\nimport { Card, Button } from 'antd'\r\nimport ReactEcharts from 'echarts-for-react'\r\n\r\nexport default function Bar() {\r\n    const [sales, setSales] = useState([5, 20, 36, 10, 10, 20])// 销量的数组\r\n    const [stores, setStores] = useState([6, 10, 25, 20, 15, 10])// 库存的数组\r\n    const update = () => {\r\n        setSales(sales.map(sale => sale + 1))\r\n        setStores(stores.reduce((pre, store) => {\r\n            pre.push(store - 1)\r\n            return pre\r\n        }, []))\r\n    }\r\n   \r\n    //   返回柱状图的配置对象   \r\n    const getOption = (sales, stores) => {\r\n        return {\r\n            // title: {\r\n            //     text: 'ECharts 入门示例'\r\n            // },\r\n            tooltip: {},\r\n            legend: {\r\n                data: ['销量', '库存']\r\n            },\r\n            xAxis: {\r\n                data: [\"衬衫\", \"羊毛衫\", \"雪纺衫\", \"裤子\", \"高跟鞋\", \"袜子\"]\r\n            },\r\n            yAxis: {},\r\n            series: [{\r\n                name: '销量',\r\n                type: 'bar',\r\n                data: sales\r\n            }, {\r\n                name: '库存',\r\n                type: 'bar',\r\n                data: stores\r\n            }]\r\n        }\r\n    }\r\n    return (\r\n        <div>\r\n            <Card>\r\n                <Button type='primary' onClick={update}>更新</Button>\r\n            </Card>\r\n\r\n            <Card title='柱状图一'>\r\n                <ReactEcharts option={getOption(sales, stores)} />\r\n            </Card>\r\n\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\nimport { Card, Button } from 'antd'\r\nimport ReactEcharts from 'echarts-for-react'\r\n\r\nexport default function Line() {\r\n    const [sales, setSales] = useState([5, 20, 36, 10, 10, 20])// 销量的数组\r\n    const [stores, setStores] = useState([6, 10, 25, 20, 15, 10])// 库存的数组\r\n    const update = () => {\r\n        setSales(sales.map(sale => sale + 1))\r\n        setStores(stores.reduce((pre, store) => {\r\n            pre.push(store - 1)\r\n            return pre\r\n        }, []))\r\n    }\r\n   \r\n    //   返回折线图的配置对象   \r\n    const getOption = (sales, stores) => {\r\n        return {\r\n            // title: {\r\n            //     text: 'ECharts 入门示例'\r\n            // },\r\n            tooltip: {},\r\n            legend: {\r\n                data: ['销量', '库存']\r\n            },\r\n            xAxis: {\r\n                data: [\"衬衫\", \"羊毛衫\", \"雪纺衫\", \"裤子\", \"高跟鞋\", \"袜子\"]\r\n            },\r\n            yAxis: {},\r\n            series: [{\r\n                name: '销量',\r\n                type: 'line',\r\n                data: sales\r\n            }, {\r\n                name: '库存',\r\n                type: 'line',\r\n                data: stores\r\n            }]\r\n        }\r\n    }\r\n    return (\r\n        <div>\r\n            <Card>\r\n                <Button type='primary' onClick={update}>更新</Button>\r\n            </Card>\r\n\r\n            <Card title='折线图一'>\r\n                <ReactEcharts option={getOption(sales, stores)} />\r\n            </Card>\r\n\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Card } from 'antd'\r\nimport ReactEcharts from 'echarts-for-react'\r\n\r\nexport default function Pie() {\r\n\r\n    // 返回饼图的配置对象   \r\n    const getOption1 = () => {\r\n        return {\r\n            title: {\r\n                text: '某站点用户访问来源',\r\n                subtext: '纯属虚构',\r\n                x: 'center'\r\n            },\r\n            tooltip: {\r\n                trigger: 'item',\r\n                formatter: \"{a} <br/>{b} : {c} ({d}%)\"\r\n            },\r\n            legend: {\r\n                orient: 'vertical',\r\n                left: 'left',\r\n                data: ['直接访问', '邮件营销', '联盟广告', '视频广告', '搜索引擎']\r\n            },\r\n            series: [\r\n                {\r\n                    name: '访问来源',\r\n                    type: 'pie',\r\n                    radius: '55%',\r\n                    center: ['50%', '60%'],\r\n                    data: [\r\n                        { value: 335, name: '直接访问' },\r\n                        { value: 310, name: '邮件营销' },\r\n                        { value: 234, name: '联盟广告' },\r\n                        { value: 135, name: '视频广告' },\r\n                        { value: 1548, name: '搜索引擎' }\r\n                    ],\r\n                    emphasis: {\r\n                        itemStyle: {\r\n                            shadowBlur: 10,\r\n                            shadowOffsetX: 0,\r\n                            shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n                        }\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n    }\r\n    //   返回饼图的配置对象   \r\n    const getOption2 = () => {\r\n        return {\r\n            backgroundColor: '#2c343c',\r\n\r\n            title: {\r\n                text: 'Customized Pie',\r\n                left: 'center',\r\n                top: 20,\r\n                textStyle: {\r\n                    color: '#ccc'\r\n                }\r\n            },\r\n\r\n            tooltip: {\r\n                trigger: 'item',\r\n                formatter: \"{a} <br/>{b} : {c} ({d}%)\"\r\n            },\r\n\r\n            visualMap: {\r\n                show: false,\r\n                min: 80,\r\n                max: 600,\r\n                inRange: {\r\n                    colorLightness: [0, 1]\r\n                }\r\n            },\r\n            series: [\r\n                {\r\n                    name: '访问来源',\r\n                    type: 'pie',\r\n                    radius: '55%',\r\n                    center: ['50%', '50%'],\r\n                    data: [\r\n                        { value: 335, name: '直接访问' },\r\n                        { value: 310, name: '邮件营销' },\r\n                        { value: 274, name: '联盟广告' },\r\n                        { value: 235, name: '视频广告' },\r\n                        { value: 400, name: '搜索引擎' }\r\n                    ].sort(function (a, b) { return a.value - b.value; }),\r\n                    roseType: 'radius',\r\n                    label: {\r\n                        color: 'rgba(255, 255, 255, 0.3)'\r\n                    },\r\n                    labelLine: {\r\n\r\n                        lineStyle: {\r\n                            color: 'rgba(255, 255, 255, 0.3)'\r\n                        },\r\n                        smooth: 0.2,\r\n                        length: 10,\r\n                        length2: 20\r\n\r\n                    },\r\n                    itemStyle: {\r\n\r\n                        color: '#c23531',\r\n                        shadowBlur: 200,\r\n                        shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n\r\n                    },\r\n\r\n                    animationType: 'scale',\r\n                    animationEasing: 'elasticOut',\r\n                    animationDelay: function (idx) {\r\n                        return Math.random() * 200;\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n    }\r\n    return (\r\n        <div>\r\n            <Card title='饼图一'>\r\n                <ReactEcharts option={getOption1()} style={{ height: 300 }} />\r\n            </Card>\r\n            <Card title='饼图二'>\r\n                <ReactEcharts option={getOption2()} style={{ height: 300 }} />\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Card, Select, Input, Button, Table, message } from 'antd'\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { PlusOutlined } from '@ant-design/icons'\r\nimport LinkButton from '../../../../components/link-button'\r\nimport { reqProducts, reqSearchProducts, reqUpdatesProductsStatus } from '../../../../api/index'\r\nimport { PAGE_SIZE } from '../../../../utils/constants'\r\n\r\n\r\nconst { Option } = Select;\r\n/**\r\n * Product的默认子路由组件\r\n */\r\nexport default function ProductHome() {\r\n    const navigate = useNavigate();\r\n    const [products, setProducts] = useState([]);// 商品数组\r\n    const [total, setTotal] = useState(0);// 商品总数量\r\n    const [loading, setLoading] = useState(false);//是否正在获取数据中\r\n    const [pageNum, setPageNum] = useState(1);// 商品数组当前页码数\r\n    const [searchName, setSearchName] = useState('');// 搜索内容\r\n    const [searchType, setSearchType] = useState('productName');// 搜索类型\r\n    const title = (\r\n        <span>\r\n            <Select\r\n                value={searchType}\r\n                style={{ width: 150 }}\r\n                onChange={setSearchType} //value => setsearchType(value)\r\n            >\r\n                <Option value='productName'>按名称搜索</Option>\r\n                <Option value='productDesc'>按描述搜索</Option>\r\n            </Select>\r\n            <Input\r\n                placeholder='关键字'\r\n                style={{ width: 150, margin: '0 15px' }}\r\n                value={searchName}\r\n                // 根据文档判断onChange的传值到底是什么\r\n                onChange={event => setSearchName(event.target.value)}\r\n            />\r\n            <Button type='primary' onClick={() => {setPageNum(1);getProducts(1)}}>搜索</Button>\r\n        </span>\r\n    )\r\n    const extra = (\r\n        <Button type='primary' onClick={() => navigate('addupdate')}>\r\n            <PlusOutlined />\r\n            添加商品\r\n        </Button>\r\n    )\r\n    const columns = [\r\n        {\r\n            title: '商品名称',\r\n            dataIndex: 'name',\r\n        },\r\n        {\r\n            title: '商品描述',\r\n            dataIndex: 'desc',\r\n        },\r\n        {\r\n            title: '价格',\r\n            dataIndex: 'price',\r\n            render: (price) => '¥' + price  // 当前指定了对应的属性, 传入的是对应的属性值\r\n        },\r\n        {\r\n            width: 100,\r\n            title: '状态',\r\n            // dataIndex: 'status',\r\n            render: (product) => {\r\n                const { status, _id } = product\r\n                return (\r\n                    <span>\r\n                        <Button\r\n                            type='primary'\r\n                            onClick={() => updateStatus(_id, status === 1 ? 2 : 1)}\r\n                        >\r\n                            {status === 1 ? '下架' : '上架'}\r\n                        </Button>\r\n                        <span>{status === 1 ? '在售' : '已下架'}</span>\r\n                    </span>\r\n                )\r\n            }\r\n        },\r\n        {\r\n            width: 100,\r\n            title: '操作',\r\n            render: (product) => {\r\n                return (\r\n                    <span>\r\n                        {/*将product对象使用state传递给目标路由组件*/}\r\n                        <LinkButton onClick={() => navigate('detail', { state: product })} >\r\n                            {/* <Link to='detail'>详情</Link> */}\r\n                            详情\r\n                        </LinkButton>\r\n                        <LinkButton onClick={() => navigate('addupdate', { state: product })} >\r\n                            修改\r\n                        </LinkButton>\r\n                    </span>\r\n                )\r\n            }\r\n        },\r\n    ]\r\n    // 获取指定页码的列表数据显示\r\n    const getProducts = async (pageNum) => {\r\n        setLoading(true)\r\n        //是否搜索\r\n        let result\r\n        if (searchName) {\r\n            result = await reqSearchProducts({ pageNum, pageSize: PAGE_SIZE, searchName, searchType })\r\n        } else {//一般分页\r\n            result = await reqProducts(pageNum, PAGE_SIZE)\r\n        }\r\n        // console.log(result)\r\n        setLoading(false)\r\n        if (result.status === 0) {\r\n            const { total, list } = result.data\r\n            setProducts(list)\r\n            setTotal(total)\r\n        }\r\n\r\n    }\r\n\r\n    //   更新指定商品的状态\r\n    const updateStatus = async (productId, status) => {\r\n        const result = await reqUpdatesProductsStatus(productId, status)\r\n        if (result.status === 0) {\r\n            message.success('更新商品成功')\r\n            getProducts(pageNum)\r\n        }\r\n    }\r\n    // eslint-disable-next-line  \r\n    useEffect(() => { getProducts(pageNum) }, [pageNum])\r\n    return (\r\n        <Card title={title} extra={extra}>\r\n            <Table\r\n                bordered\r\n                rowKey='_id'\r\n                dataSource={products}\r\n                columns={columns}\r\n                loading={loading}\r\n                pagination={{\r\n                    current:pageNum,\r\n                    total,//total:total, \r\n                    defaultPageSize: PAGE_SIZE,\r\n                    showQuickJumper: true,\r\n                    onChange: setPageNum //(pageNum) => setPageNum(pageNum)\r\n                }}\r\n            />\r\n        </Card>\r\n    )\r\n}\r\n","import React,{useState,useEffect} from 'react'\r\nimport { Card, List} from 'antd'\r\nimport { ArrowLeftOutlined } from '@ant-design/icons'\r\nimport { useNavigate,useLocation } from \"react-router-dom\"\r\nimport LinkButton from '../../../../components/link-button'\r\nimport { BASE_IMG_URL } from '../../../../utils/constants'\r\nimport {reqCategory} from '../../../../api/index'\r\nconst { Item } = List\r\n/**\r\n * Product的详情子路由组件\r\n */\r\nexport default function ProductDetail() {\r\n    const [cName1,setCName1] = useState('')//一级分类名称\r\n    const [cName2,setCName2] = useState('')//二级分类名称\r\n\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    console.log(location)\r\n    // 得到当前商品的信息 通过state传递\r\n    const {name, desc, price, detail, imgs,pCategoryId, categoryId} = location.state\r\n    const title = (\r\n        <span>\r\n            <LinkButton>\r\n                 <ArrowLeftOutlined \r\n                 style={{marginRight:10,fontSize:20}}\r\n                 onClick={() => navigate(-1)}\r\n                 />       \r\n            </LinkButton>\r\n\r\n            <span>商品详情</span>\r\n        </span>\r\n    )\r\n    // 得到当前商品的分类\r\n    const getCategory = async () => {\r\n        if(pCategoryId==='0') { // 一级分类下的商品\r\n            const result = await reqCategory(categoryId)\r\n            const cName1 = result.data.name\r\n            setCName1(cName1)\r\n          } else { // 二级分类下的商品\r\n            /*\r\n            //通过多个await方式发多个请求: 后面一个请求是在前一个请求成功返回之后才发送\r\n            const result1 = await reqCategory(pCategoryId) // 获取一级分类列表\r\n            const result2 = await reqCategory(categoryId) // 获取二级分类\r\n            const cName1 = result1.data.name\r\n            const cName2 = result2.data.name\r\n            */\r\n      \r\n            // 一次性发送多个请求, 只有都成功了, 才正常处理\r\n            const results = await Promise.all([reqCategory(pCategoryId), reqCategory(categoryId)])\r\n            const {name:cName1} = results[0].data\r\n            const {name:cName2} = results[1].data\r\n            setCName1(cName1)\r\n            setCName2(cName2)\r\n\r\n          }\r\n    }\r\n    // eslint-disable-next-line  \r\n    useEffect(() => { getCategory() }, [])\r\n    return (\r\n        <Card title={title} className='product-detail'>\r\n            {/* 设置 List.Item 布局, 设置成 vertical 则竖直样式显示, 默认横排 */}\r\n            <List bordered itemLayout =\"vertical\" >\r\n                <Item>\r\n                    <span className=\"left\">商品名称：</span>\r\n                    <span>{name}</span>\r\n                </Item>\r\n                <Item>\r\n                    <span className=\"left\">商品描述：</span>\r\n                    <span>{desc}</span>\r\n                </Item>\r\n                <Item>\r\n                    <span className=\"left\">商品价格：</span>\r\n                    <span>{price}元</span>\r\n                </Item>\r\n                <Item>\r\n                    <span className=\"left\">所属分类：</span>\r\n                    <span>{cName1} {cName2 ? ' --> '+cName2 : ''}</span>\r\n                </Item>\r\n                <Item>\r\n                    <span className=\"left\">商品图片：</span>\r\n                    <span >\r\n                        {\r\n                            imgs.map(img => (\r\n                                <img\r\n                                  key={img}\r\n                                  src={BASE_IMG_URL + img}\r\n                                  className=\"product-img\"\r\n                                  alt=\"img\"\r\n                                />\r\n                              ))\r\n                        }\r\n                    </span>\r\n                </Item>\r\n                <Item>\r\n                    {/* dangerouslySetInnerHTML是React为浏览器DOM提供innerHTML的替换方案。\r\n                    通常来讲，使用代码直接设置HTML存在风险，因为很容易无意中使用户暴露于跨站脚本（XSS）的攻击。\r\n                    因此，你可以直接在React中设置HTML，但当你想设置dangerouslySetInnerHTML时，\r\n                    需要向其传递包含key为__html的对象，以此来警示你。 */}\r\n                    <span className=\"left\">商品详情:</span>\r\n                    <span dangerouslySetInnerHTML={{ __html: detail }}>\r\n                    </span>\r\n                </Item>\r\n            </List>\r\n\r\n        </Card>\r\n    )\r\n}\r\n","import React, { useState, forwardRef, useImperativeHandle } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Upload, Modal, message } from 'antd'\r\nimport { PlusOutlined } from '@ant-design/icons'\r\nimport { BASE_IMG_URL } from \"../../../../utils/constants\";\r\nimport { reqDeleteImg } from '../../../../api/index'\r\n/**\r\n * 用于图片上传的组件\r\n */\r\n// 默认情况下，不能在函数组件上使用 ref 属性，因为它们没有实例。\r\n// 解决办法就是使用forwardRef和useImperativeHandle。\r\nconst PicturesWall = forwardRef((props, ref) => {\r\n  const { imgs } = props\r\n  // 添加时图片信息为空数组，修改时获得当前修改项的图片信息\r\n  let fileList1 = []\r\n  if (imgs && imgs.length > 0) {\r\n    fileList1 = imgs.map((img, index) => ({\r\n      uid: -index, // 每个file都有自己唯一的id\r\n      name: img, // 图片文件名\r\n      status: 'done', // 图片状态: done-已上传, uploading: 正在上传中, removed: 已删除\r\n      url: BASE_IMG_URL + img\r\n    }))\r\n  }\r\n  const [previewVisible, setPreviewVisible] = useState(false)// 标识是否显示大图预览Modal\r\n  const [previewImage, setPreviewImage] = useState('')// 大图的url\r\n  const [fileList, setFileList] = useState(fileList1)//图片信息\r\n\r\n  \r\n  //将子组件的方法 暴露给父组件\r\n  useImperativeHandle(ref, () => ({\r\n    getImgs\r\n  }))\r\n  // 获取所有已上传图片文件名的数组\r\n  const getImgs = () => {\r\n    return fileList.map(file => file.name)\r\n  }\r\n\r\n  const uploadButton = (\r\n    <div>\r\n      <PlusOutlined />\r\n      <div>Upload</div>\r\n    </div>\r\n  );\r\n  /*\r\n  隐藏Modal\r\n   */\r\n  const handleCancel = () => setPreviewVisible(false);\r\n\r\n  const handlePreview = file => {\r\n    console.log('handlePreview()', file)\r\n    // 显示指定file对应的大图\r\n    setPreviewImage(file.url || file.thumbUrl)\r\n    setPreviewVisible(true)\r\n  }\r\n\r\n  /*\r\n  file: 当前操作的图片文件(上传/删除)\r\n  fileList: 所有已上传图片文件对象的数组\r\n   */\r\n  const handleChange = async ({ file, fileList }) => {\r\n    console.log('handleChange()', file.status, fileList.length, file === fileList[fileList.length - 1])\r\n    console.log(fileList)\r\n    // 一旦上传成功, 将当前上传的file的信息修正(name, url)\r\n    if (file.status === 'done') {\r\n      const result = file.response  // {status: 0, data: {name: 'xxx.jpg', url: '图片地址'}}\r\n      if (result.status === 0) {\r\n        message.success('上传图片成功!')\r\n        const { name, url } = result.data\r\n        file = fileList[fileList.length - 1]\r\n        file.name = name\r\n        file.url = url\r\n      } else {\r\n        message.error('上传图片失败')\r\n      }\r\n    } else if (file.status === 'removed') { // 删除图片\r\n      const result = await reqDeleteImg(file.name)\r\n      if (result.status === 0) {\r\n        message.success('删除图片成功!')\r\n      } else {\r\n        message.error('删除图片失败!')\r\n      }\r\n    }\r\n    // 在操作(上传/删除)过程中更新fileList状态\r\n    setFileList(fileList)\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Upload\r\n        action=\"/manage/img/upload\" /*上传图片的接口地址*/\r\n        accept='image/*'  /*只接收图片格式*/\r\n        name='image' /*请求参数名*/\r\n        listType=\"picture-card\"  /*卡片样式*/\r\n        fileList={fileList}  /*所有已上传图片文件对象的数组*/\r\n        onPreview={handlePreview}\r\n        onChange={handleChange}\r\n      >\r\n        {fileList.length >= 4 ? null : uploadButton}\r\n      </Upload>\r\n\r\n      <Modal visible={previewVisible} footer={null} onCancel={handleCancel}>\r\n        <img alt=\"example\" style={{ width: '100%' }} src={previewImage} />\r\n      </Modal>\r\n    </div>\r\n  )\r\n\r\n})\r\n\r\nPicturesWall.propTypes = {\r\n  imgs: PropTypes.array\r\n\r\n}\r\n\r\nexport default PicturesWall","import React, { useState, forwardRef, useImperativeHandle } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {EditorState, convertToRaw, ContentState} from 'draft-js'\r\nimport {Editor} from 'react-draft-wysiwyg'\r\nimport draftToHtml from 'draftjs-to-html'\r\nimport htmlToDraft from 'html-to-draftjs'\r\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css'//修改了其中两个下拉框的高度\r\n/**\r\n * 富文本编辑器的组件\r\n */\r\n// 默认情况下，不能在函数组件上使用 ref 属性，因为它们没有实例。\r\n// 解决办法就是使用forwardRef和useImperativeHandle。\r\nconst RichTextEditor = forwardRef((props, ref) => {\r\n  const { detail } = props\r\n  let editorState1 = EditorState.createEmpty()// 创建一个没有内容的编辑对象\r\n  if (detail) { // 如果有值, 根据html格式字符串创建一个对应的编辑对象\r\n    const contentBlock = htmlToDraft(detail)\r\n    const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks)\r\n    editorState1 = EditorState.createWithContent(contentState)\r\n  } \r\n  \r\n  const [editorState,setEditorState] =useState(editorState1)\r\n\r\n  //将子组件的方法 暴露给父组件\r\n  useImperativeHandle(ref, () => ({\r\n    getDetail\r\n  }))\r\n  const getDetail = () => {\r\n    // 返回输入数据对应的html格式的文本\r\n    return draftToHtml(convertToRaw(editorState.getCurrentContent()))\r\n  }\r\n  // 输入过程中实时的回调\r\n  const onEditorStateChange = (editorState) => {\r\n    // console.log('onEditorStateChange()')\r\n    setEditorState(editorState)\r\n  }\r\n  const uploadImageCallBack = (file) => {\r\n    return new Promise(\r\n      (resolve, reject) => {\r\n        const xhr = new XMLHttpRequest()\r\n        xhr.open('POST', '/manage/img/upload')\r\n        const data = new FormData()\r\n        data.append('image', file)\r\n        xhr.send(data)\r\n        xhr.addEventListener('load', () => {\r\n          const response = JSON.parse(xhr.responseText)\r\n          const url = response.data.url // 得到图片的url\r\n          resolve({data: {link: url}})\r\n        })\r\n        xhr.addEventListener('error', () => {\r\n          const error = JSON.parse(xhr.responseText)\r\n          reject(error)\r\n        })\r\n      }\r\n    )\r\n  }\r\n  \r\n  return (\r\n    <Editor\r\n        editorState={editorState}\r\n        // 文本框样式\r\n        editorStyle={{border: '1px solid black', minHeight: 200, paddingLeft: 10}}\r\n        onEditorStateChange={onEditorStateChange}\r\n        toolbar={{\r\n          image: { uploadCallback:uploadImageCallBack, alt: { present: true, mandatory: true } },\r\n        }}\r\n      />\r\n  )\r\n\r\n})\r\n\r\nRichTextEditor.propTypes = { \r\n  detail: PropTypes.string\r\n}\r\n\r\nexport default RichTextEditor","import React, { useEffect, useState, useRef } from 'react'\r\nimport {\r\n    Card,\r\n    Form,\r\n    Input,\r\n    Cascader,\r\n    Button,\r\n    message\r\n} from 'antd'\r\nimport { ArrowLeftOutlined } from '@ant-design/icons'\r\nimport { useNavigate, useLocation } from \"react-router-dom\"\r\nimport LinkButton from '../../../../components/link-button'\r\nimport { reqCateGories,reqAddOrUpdateProduct } from '../../../../api/index'\r\nimport PicturesWall from './pictures-wall'\r\nimport RichTextEditor from './rich-text-editor'\r\n\r\nconst { Item } = Form\r\nconst { TextArea } = Input\r\n/*\r\n* Product的添加和更新的子路由组件\r\n*/\r\nexport default function ProductAddUpdate() {\r\n    const navigate = useNavigate()\r\n    // 在函数的内部是可以使用useRef钩子来获取组件内的DOM元素。\r\n    const pw = useRef()\r\n    const editor = useRef()\r\n\r\n    const [options, setOptions] = useState([]);\r\n \r\n    const [form] = Form.useForm();\r\n    const location = useLocation();\r\n    const isUpdate = location.state\r\n    const product = isUpdate || {}\r\n    const { pCategoryId, categoryId, imgs, detail,_id } = product\r\n    // 用来接收级联分类ID的数组\r\n    const categoryIds = []\r\n    if (isUpdate) {\r\n        // 商品是一个一级分类的商品\r\n        if (pCategoryId === '0') {\r\n            categoryIds.push(categoryId)\r\n        } else {\r\n            // 商品是一个二级分类的商品\r\n            categoryIds.push(pCategoryId)\r\n            categoryIds.push(categoryId)\r\n        }\r\n    }\r\n    const onFinish = async (values) => {\r\n        // console.log(values)\r\n        // 1. 收集数据, 并封装成product对象\r\n        const {name, desc, price, categoryIds} = values\r\n        let pCategoryId, categoryId\r\n        if (categoryIds.length===1) {\r\n          pCategoryId = '0'\r\n          categoryId = categoryIds[0]\r\n        } else {\r\n          pCategoryId = categoryIds[0]\r\n          categoryId = categoryIds[1]\r\n        }\r\n        const imgs = pw.current.getImgs()\r\n        const detail = editor.current.getDetail()\r\n        // console.log(imgs)\r\n        // console.log(detail)\r\n\r\n        const product = {name, desc, price, imgs, detail, pCategoryId, categoryId}\r\n\r\n        // 如果是更新, 需要添加_id\r\n        if(isUpdate) {\r\n            product._id=_id\r\n        }\r\n\r\n        // 2. 调用接口请求函数去添加/更新\r\n        const result = await reqAddOrUpdateProduct(product)\r\n\r\n        // 3. 根据结果提示\r\n        if (result.status===0) {\r\n          message.success(`${isUpdate ? '更新' : '添加'}商品成功!`)\r\n          navigate(-1)\r\n        } else {\r\n          message.error(`${isUpdate ? '更新' : '添加'}商品失败!`)\r\n        }\r\n    }\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('校验失败', errorInfo);\r\n    };\r\n    const initOptions = async (categorys) => {\r\n        // 根据categorys生成options数组\r\n        const options = categorys.map(c => ({\r\n            value: c._id,\r\n            label: c.name,\r\n            isLeaf: false, // 不是叶子\r\n        }))\r\n        // 如果是一个二级分类商品的更新\r\n        if (isUpdate && pCategoryId !== '0') {\r\n            // 获取对应的二级分类列表\r\n            const subCategorys = await getCategories(pCategoryId)\r\n            // 生成二级下拉列表的options\r\n            const childOptions = subCategorys.map(c => ({\r\n                value: c._id,\r\n                label: c.name,\r\n            }))\r\n            // 找到当前商品对应的一级option对象\r\n            const targetOption = options.find(option => option.value === pCategoryId)\r\n            // 关联对应的一级option上\r\n            targetOption.children = childOptions\r\n        }\r\n        // 更新options状态\r\n        setOptions(options)\r\n    }\r\n    // 异步获取一级/二级分类列表\r\n    // async函数的返回值是一个新的promise对象, promise的结果和值由async的结果来决定\r\n    const getCategories = async (parentId) => {\r\n        const result = await reqCateGories(parentId);\r\n        if (result.status === 0) {\r\n            const categorys = result.data\r\n            if (parentId === '0') {\r\n                initOptions(categorys)\r\n            } else {\r\n                return categorys  // 返回二级列表 ==> 当前async函数返回的promsie就会成功且value为categorys\r\n            }\r\n\r\n        } else {\r\n            message.error('获取分类列表失败')\r\n        }\r\n    }\r\n\r\n    // 用加载下一级列表的回调函数\r\n    const loadData = async selectedOptions => {\r\n        const targetOption = selectedOptions[selectedOptions.length - 1];// 得到选择的option对象\r\n        targetOption.loading = true;// 显示loading\r\n        // 根据选中的分类, 请求获取二级分类列表\r\n        const subCategorys = await getCategories(targetOption.value)\r\n        // 隐藏loading\r\n        targetOption.loading = false\r\n        // 二级分类数组有数据\r\n        if (subCategorys && subCategorys.length > 0) {\r\n            // 生成一个二级列表的options\r\n            const childOptions = subCategorys.map(c => ({\r\n                value: c._id,\r\n                label: c.name\r\n            }))\r\n            // 关联到当前option上\r\n            targetOption.children = childOptions\r\n        } else { // 当前选中的分类没有二级分类\r\n            targetOption.isLeaf = true\r\n        }\r\n\r\n        setOptions([...options]);\r\n\r\n    };\r\n    useEffect(() => {\r\n        getCategories('0')\r\n        form.setFieldsValue({\r\n            name: product.name,\r\n            desc: product.desc,\r\n            price: product.price,\r\n            categoryIds\r\n        });\r\n        // eslint-disable-next-line\r\n    }, []);\r\n    const title = (\r\n        <span>\r\n            <LinkButton>\r\n                <ArrowLeftOutlined\r\n                    style={{ marginRight: 10, fontSize: 20 }}\r\n                    onClick={() => navigate(-1)}\r\n                />\r\n            </LinkButton>\r\n\r\n            <span>{isUpdate ? '修改商品' : '添加商品'}</span>\r\n        </span>\r\n    )\r\n    return (\r\n        <Card title={title} >\r\n            <Form\r\n                form={form}\r\n                labelCol={{ span: 2 }} //左侧label宽度\r\n                wrapperCol={{ span: 8 }}//右侧包裹宽度\r\n                onFinish={onFinish}\r\n                onFinishFailed={onFinishFailed}\r\n            >\r\n                <Item\r\n                    name='name'\r\n                    label=\"商品名称\"\r\n                    rules={[{ required: true, message: '必须输入商品名称' }]}\r\n\r\n                >\r\n                    <Input placeholder='请输入商品名称' />\r\n                </Item>\r\n                <Item\r\n                    name='desc'\r\n                    label=\"商品描述\"\r\n                    rules={[{ required: true, message: '必须输入商品描述' }]}\r\n                >\r\n                    <TextArea placeholder=\"请输入商品描述\" autosize={{ minRows: 2, maxRows: 6 }} />\r\n                </Item>\r\n                <Item\r\n                    name='price'\r\n                    label=\"商品价格\"\r\n                    rules={[\r\n                        { required: true, message: '必须输入商品价格' },\r\n                        {\r\n                            validator: (_, value) => {\r\n                                if (value && value * 1 <= 0) {\r\n                                    return Promise.reject(new Error('价格必须大于0'));\r\n                                } else {\r\n                                    return Promise.resolve();\r\n                                }\r\n                            }\r\n                        }]}\r\n                >\r\n                    <Input type='number' placeholder='请输入商品价格' addonAfter='元' />\r\n                </Item>\r\n                <Item\r\n                    name='categoryIds'\r\n                    label=\"商品分类\"\r\n                    rules={[{ required: true, message: '必须输入商品分类' }]}\r\n                >\r\n                    <Cascader placeholder='请指定商品分类' options={options} loadData={loadData} />\r\n                </Item>\r\n\r\n                <Item label=\"商品图片\">\r\n                    <PicturesWall ref={pw} imgs={imgs} />\r\n                </Item>\r\n                <Item label=\"商品详情\" labelCol={{ span: 2 }} wrapperCol={{ span: 18 }}>\r\n                    <RichTextEditor ref={editor} detail={detail}/>\r\n                </Item>\r\n                <Item>\r\n                    <Button type='primary' htmlType=\"submit\" >提交</Button>\r\n                </Item>\r\n            </Form>\r\n\r\n\r\n        </Card>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Routes, Route } from 'react-router-dom'\r\n// 引入路由组件\r\nimport Login from './pages/login'\r\nimport Admin from './pages/admin'\r\nimport NotFound from './pages/not-found'\r\nimport User from './pages/admin/user'\r\nimport Category from './pages/admin/category'\r\nimport Home from './pages/admin/home'\r\nimport Product from './pages/admin/product'\r\nimport Role from './pages/admin/role'\r\nimport Bar from './pages/admin/charts/bar'\r\nimport Line from './pages/admin/charts/line'\r\nimport Pie from './pages/admin/charts/pie'\r\nimport ProductHome from './pages/admin/product/home'\r\nimport ProductDetail from './pages/admin/product/detail'\r\nimport ProductAddUpdate from './pages/admin/product/add-update'\r\n/**\r\n *  根组件(函数式)\r\n */\r\nexport default function App() {    \r\n    return (\r\n        \r\n            // React-Router v6新特性 <Switch>重命名为<Routes></Routes> \r\n            // component重命名为element\r\n            // 中小型项目嵌套路由可集中显示，在需要显示的地方使用<Outlet />作为占位符\r\n            // 若分别显示，具有后代路由（在其他组件中定义）的路由在其路径中使用尾随* \r\n            // index 表示主路由\r\n            // v6中不再支持 v5 中的 <Redirect> 元素作为路由配置的一部分（在 <Routes> 内）\r\n            <Routes>\r\n                <Route path='/login' element={<Login/>}></Route>\r\n                <Route path='/' element={<Admin/>}>\r\n                    <Route index element={<Home/>} />\r\n                    <Route path='/category' element={<Category/>} />\r\n                    <Route path='/product' element={<Product/>}>\r\n                        <Route index element={<ProductHome/>} />\r\n                        <Route path='detail' element={<ProductDetail/>} />\r\n                        <Route path='addupdate' element={<ProductAddUpdate/>} />\r\n                    </Route>\r\n                    <Route path='/user' element={<User/>} />\r\n                    <Route path='/role' element={<Role/>} />\r\n                    <Route path=\"/charts-bar\" element={<Bar/>} />\r\n                    <Route path=\"/charts-pie\" element={<Pie/>} />\r\n                    <Route path=\"/charts-line\" element={<Line/>} />\r\n                </Route>\r\n                {/* 以上路径都不匹配时 */}\r\n                <Route path='*' element={<NotFound/>}></Route>\r\n            </Routes>\r\n        \r\n    )\r\n}\r\n","// 入口js\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { BrowserRouter} from 'react-router-dom'\r\nimport App from './App'\r\nimport 'antd/dist/antd.less'\r\nimport storageUtils from './utils/storageUtils'\r\nimport memoryUtils from './utils/memoryUtils'\r\n\r\n// 读取local中保存user, 保存到内存中\r\nconst user = storageUtils.getUser()\r\nmemoryUtils.user = user\r\n// React解析组件标签，找到了App组件。\r\n// 发现组件是使用函数定义的，随后调用该函数，将返回的虚拟DOM转为真实DOM，随后呈现在页面中。\r\nReactDOM.render(\r\n    <BrowserRouter>\r\n        <App />\r\n    </BrowserRouter>,\r\ndocument.getElementById('root'))"],"sourceRoot":""}